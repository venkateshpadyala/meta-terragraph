"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[1319],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>k});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),d=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=d(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=d(n),k=r,h=u["".concat(s,".").concat(k)]||u[k]||c[k]||o;return n?a.createElement(h,i(i({ref:t},p),{},{components:n})):a.createElement(h,i({ref:t},p))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var d=2;d<o;d++)i[d]=n[d];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},4794:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>c,frontMatter:()=>o,metadata:()=>l,toc:()=>d});var a=n(7462),r=(n(7294),n(3905));const o={},i="Quick Start",l={unversionedId:"runbook/Quick_Start",id:"runbook/Quick_Start",title:"Quick Start",description:"Goals",source:"@site/../docs/runbook/Quick_Start.md",sourceDirName:"runbook",slug:"/runbook/Quick_Start",permalink:"/docs/runbook/Quick_Start",draft:!1,editUrl:"https://github.com/terragraph/meta-terragraph/edit/main/docs/../docs/runbook/Quick_Start.md",tags:[],version:"current",frontMatter:{},sidebar:"runbookSidebar",previous:{title:"Overview",permalink:"/docs/runbook/Overview"},next:{title:"Network Planning",permalink:"/docs/runbook/Planning"}},s={},d=[{value:"Goals",id:"goals",level:2},{value:"Installation",id:"installation",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Cloud Services",id:"cloud-services",level:3},{value:"Nodes",id:"nodes",level:3},{value:"Create the Network Topology",id:"create-the-network-topology",level:4},{value:"Add Sites",id:"add-sites",level:5},{value:"Add Nodes",id:"add-nodes",level:5},{value:"Add Link",id:"add-link",level:5},{value:"Configure the Network",id:"configure-the-network",level:4},{value:"Network-Wide Config",id:"network-wide-config",level:5},{value:"PoP Node Config",id:"pop-node-config",level:5},{value:"E2E Controller Config",id:"e2e-controller-config",level:5},{value:"Deploy the PoP Configuration",id:"deploy-the-pop-configuration",level:4},{value:"Next Steps",id:"next-steps",level:2},{value:"Configure Stats, Events, and Logs",id:"configure-stats-events-and-logs",level:3},{value:"SSH Access",id:"ssh-access",level:3},{value:"Terragraph API Access",id:"terragraph-api-access",level:3},{value:"Using the TG CLI",id:"using-the-tg-cli",level:3},{value:"Log Viewing",id:"log-viewing",level:3},{value:"Node Logs",id:"node-logs",level:4},{value:"Cloud Service Logs",id:"cloud-service-logs",level:4},{value:"Software Upgrades",id:"software-upgrades",level:3}],p={toc:d};function c(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"quick-start"},"Quick Start"),(0,r.kt)("a",{id:"quick-start-goals"}),(0,r.kt)("h2",{id:"goals"},"Goals"),(0,r.kt)("p",null,"This quick start guide will walk through a minimal Terragraph network setup\nusing Meta hardware and software, which includes:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Installing Terragraph cloud services via Docker Swarm."),(0,r.kt)("li",{parentName:"ol"},"Configuring routes between the PoP node and external network using BGP."),(0,r.kt)("li",{parentName:"ol"},"Bringing up a single Terragraph link using the Terragraph NMS.")),(0,r.kt)("p",null,"This guide will not cover physical installation (e.g. how to mount nodes)."),(0,r.kt)("a",{id:"quick-start-installation"}),(0,r.kt)("h2",{id:"installation"},"Installation"),(0,r.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Two Puma nodes."),(0,r.kt)("li",{parentName:"ul"},"A signed SSH key for logging into the PoP node."),(0,r.kt)("li",{parentName:"ul"},"An IPv6-compatible router which can be configured for routing traffic to and\nfrom the Terragraph network prefix. The router should support BGP, but static\nrouting is also possible."),(0,r.kt)("li",{parentName:"ul"},"Any QR code scanner.")),(0,r.kt)("h3",{id:"cloud-services"},"Cloud Services"),(0,r.kt)("p",null,"Terragraph's cloud suite is managed using Docker Swarm and is composed of the\nE2E services and the NMS backend. For a list and short description of all\nTerragraph cloud services, see ",(0,r.kt)("a",{parentName:"p",href:"/docs/runbook/Overview#cloud-software"},"Cloud Software"),"."),(0,r.kt)("p",null,"Install the Terragraph cloud suite by following the instructions in the\n",(0,r.kt)("a",{parentName:"p",href:"/docs/runbook/Deployment#deployment-cloud"},"Cloud Services")," section."),(0,r.kt)("h3",{id:"nodes"},"Nodes"),(0,r.kt)("p",null,"This section describes how to construct and configure a single-link Terragraph\nnetwork using the Terragraph NMS. Open a web browser and navigate to the IP\naddress of any of the Docker Swarm hosts to load the NMS."),(0,r.kt)("p",null,"The Terragraph network topology described here will contain two sites with one\nnode each, and a single 60GHz link connecting them. The first node will be a PoP\nnode, and the second will be a CN. See\n",(0,r.kt)("a",{parentName:"p",href:"/docs/runbook/Overview#overview-terms"},"Important Terms")," for a more detailed description of\nthese terms."),(0,r.kt)("p",null,"After completing this section, the final topology should resemble the topology\nshown below."),(0,r.kt)("p",{align:"center"},(0,r.kt)("img",{src:"/quick_start/final_topology.png",width:"960"})),(0,r.kt)("h4",{id:"create-the-network-topology"},"Create the Network Topology"),(0,r.kt)("p",null,"This section describes how to create topology elements using the NMS."),(0,r.kt)("h5",{id:"add-sites"},"Add Sites"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},'Select "Add Planned Site" from the menu in the bottom-right corner of the\n"Map" view.',(0,r.kt)("p",{align:"center"},(0,r.kt)("img",{src:"/quick_start/add_planned_site.png",width:"960"}))),(0,r.kt)("li",{parentName:"ol"},'Move the circle marker to the desired location on the map. Then, fill in the\n"Site Name" field in the form ("Site1"). Click "Add Site" when finished.',(0,r.kt)("p",{align:"center"},(0,r.kt)("img",{src:"/quick_start/site_form.png",width:"960"})))),(0,r.kt)("h5",{id:"add-nodes"},"Add Nodes"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Scan the QR code on the back of each Puma node to obtain their MAC addresses.\nSee ",(0,r.kt)("a",{parentName:"li",href:"/docs/runbook/Deployment#node-information"},"Node Information")," for details."),(0,r.kt)("li",{parentName:"ol"},'Select "Add Node" from the menu in the bottom-right corner of the "Map" view.'),(0,r.kt)("li",{parentName:"ol"},'Fill in the form fields for the PoP node ("PopNode") as shown below, using\nthe MAC address found in the QR code. Click "Add Node" when finished.',(0,r.kt)("p",{align:"center"},(0,r.kt)("img",{src:"/quick_start/pop_node_form.png",width:"960"}))),(0,r.kt)("li",{parentName:"ol"},'Add the CN ("ClientNode") to "Site2" using the same procedure as above.',(0,r.kt)("p",{align:"center"},(0,r.kt)("img",{src:"/quick_start/cn_form.png",width:"960"})))),(0,r.kt)("h5",{id:"add-link"},"Add Link"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},'Select "Add Link" from the menu in the bottom-right corner of the "Map" view.'),(0,r.kt)("li",{parentName:"ol"},'Select the two nodes and "Wireless" link type in the form. Click "Add Link"\nwhen finished.',(0,r.kt)("p",{align:"center"},(0,r.kt)("img",{src:"/quick_start/link_form.png",width:"960"})))),(0,r.kt)("h4",{id:"configure-the-network"},"Configure the Network"),(0,r.kt)("p",null,"This section describes how to configure the network using the NMS."),(0,r.kt)("h5",{id:"network-wide-config"},"Network-Wide Config"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},'Select the "Node Config" view from the left-hand column, and make sure the\n"Network" tab is selected on the top bar.'),(0,r.kt)("li",{parentName:"ol"},"Set the value of ",(0,r.kt)("inlineCode",{parentName:"li"},"sysParams.managedConfig")," to ",(0,r.kt)("inlineCode",{parentName:"li"},"true"),', then click "Save". This\nenables active management of nodes\' configuration by the E2E controller.',(0,r.kt)("p",{align:"center"},(0,r.kt)("img",{src:"/quick_start/managed_config.png",width:"960"}))),(0,r.kt)("li",{parentName:"ol"},"If the network is deployed indoors, set the value of\n",(0,r.kt)("inlineCode",{parentName:"li"},"radioParamsBase.fwParams.forceGpsDisable")," to ",(0,r.kt)("inlineCode",{parentName:"li"},"1"),', then click "Save". This\ndisables GPS-related checks during link ignition.',(0,r.kt)("p",{align:"center"},(0,r.kt)("img",{src:"/quick_start/force_gps_disable.png",width:"960"}))),(0,r.kt)("li",{parentName:"ol"},'Click "Submit" in the top-right corner, then click "Submit" again in the\nconfirmation screen to finalize the changes.')),(0,r.kt)("h5",{id:"pop-node-config"},"PoP Node Config"),(0,r.kt)("p",null,"This section briefly describes relevant PoP node configurations and how to set\nthem. A route from the PoP node to the external network must either be\nstatically configured or learned from BGP."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"bgpParams"),": Terragraph can be configured to use BGP routing to advertise which\nnodes are available on the routed network."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"kvstoreParams"),": Used to specify important Open/R ",(0,r.kt)("inlineCode",{parentName:"li"},"KvStore")," configuration values\nthat are needed before Terragraph nodes can reach the E2E controller."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"popParams"),": Used to specify link-local information for how the PoP node should\ncommunicate with the upstream router(s). BGP and static routing are mutually\nexclusive.")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Field Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"bgpParams.cpePrefixesAutoAdvertisement")),(0,r.kt)("td",{parentName:"tr",align:null},"Enables auto-advertisement of CPE prefixes via BGP")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"bgpParams.localAsn")),(0,r.kt)("td",{parentName:"tr",align:null},"The autonomous system number (ASN) assigned to the Terragraph PoP nodes")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"bgpParams.neighbors")),(0,r.kt)("td",{parentName:"tr",align:null},"The list of upstream routers, in the form of an ASN and IPv6 address, that Terragraph PoP nodes can use to route egress traffic")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"bgpParams.specificNetworkPrefixes")),(0,r.kt)("td",{parentName:"tr",align:null},"Specific allocated network prefixes to be advertised via BGP (comma separated)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"kvstoreParams.e2e-aggr-url")),(0,r.kt)("td",{parentName:"tr",align:null},"The NMS aggregator URL in ZMQ socket endpoint format (",(0,r.kt)("em",{parentName:"td"},"optional"),")")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"kvstoreParams.e2e-ctrl-url")),(0,r.kt)("td",{parentName:"tr",align:null},"The E2E controller URL in ZMQ socket endpoint format")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"kvstoreParams.e2e-network-prefix")),(0,r.kt)("td",{parentName:"tr",align:null},"The Terragraph routed network range in CIDR format, followed by a comma and the bit-length of prefixes allocated to each node")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"popParams.GW_ADDR")),(0,r.kt)("td",{parentName:"tr",align:null},"IP address of the upstream router (only if using static routing)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"popParams.POP_ADDR")),(0,r.kt)("td",{parentName:"tr",align:null},"IPv6 address on the interface (",(0,r.kt)("inlineCode",{parentName:"td"},"POP_IFACE"),") that the PoP node uses to communicate with the upstream router")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"popParams.POP_ADDR_PREFIX_LEN")),(0,r.kt)("td",{parentName:"tr",align:null},"IPv6 address prefix length on the interface (",(0,r.kt)("inlineCode",{parentName:"td"},"POP_IFACE"),") that the PoP node uses to communicate with the upstream router")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"popParams.POP_BGP_ROUTING")),(0,r.kt)("td",{parentName:"tr",align:null},"Enable BGP routing on the PoP node")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"popParams.POP_IFACE")),(0,r.kt)("td",{parentName:"tr",align:null},"The interface that the PoP node uses to communicate with the upstream router")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"popParams.POP_STATIC_ROUTING")),(0,r.kt)("td",{parentName:"tr",align:null},"Enable static routing on the PoP node")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"popParams.VPP_ADDR")),(0,r.kt)("td",{parentName:"tr",align:null},"The IP address of the interface within VPP on the POP node (Fast Path edge address), only when using DPDK/VPP on Puma hardware")))),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},'Select the "Node" tab on the top bar.'),(0,r.kt)("li",{parentName:"ol"},'In the left-hand menu, change the "Editor" to "JSON" and select the PoP node\n("PopNode") from the list.'),(0,r.kt)("li",{parentName:"ol"},"Edit the values in the below JSON text accordingly (i.e. IPv6 addresses,\nASNs), then paste it into the space on the right.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "bgpParams": {\n    "localAsn": 65535,\n    "neighbors": {\n      "0": {\n        "asn": 65530,\n        "ipv6": "2001:a20:ff0:c505::1"\n      }\n    },\n    "specificNetworkPrefixes": "2001:a20:c305:ff00::/56"\n  },\n  "kvstoreParams": {\n    "e2e-ctrl-url": "tcp://[2001:a20:ff0:c504:20c:29ff:fe4f:945b]:7007",\n    "e2e-network-prefix": "2001:a20:c305:ff00::/56,64"\n  },\n  "popParams": {\n    "GW_ADDR": "2001:a20:ff0:c505::1",\n    "POP_ADDR": "2001:a20:ff0:c505::2",\n    "POP_ADDR_PREFIX_LEN": "64",\n    "POP_BGP_ROUTING": "1",\n    "POP_IFACE": "TenGigabitEthernet0",\n    "POP_STATIC_ROUTING": "0",\n    "VPP_ADDR": "2001:a20:ff0:c505::3"\n  }\n}\n')),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},'Click "Submit" in the top-right corner, then "Submit" again in the\nconfirmation screen to finalize the changes.',(0,r.kt)("p",{align:"center"},(0,r.kt)("img",{src:"/quick_start/pop_node_config.png",width:"960"})))),(0,r.kt)("h5",{id:"e2e-controller-config"},"E2E Controller Config"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},'Select the "E2E Config" view from the left-hand column, and make sure the\n"Controller" tab is selected on the top bar.'),(0,r.kt)("li",{parentName:"ol"},"Set the value of ",(0,r.kt)("inlineCode",{parentName:"li"},"prefixAllocParams")," fields according to the\n",(0,r.kt)("inlineCode",{parentName:"li"},"kvstoreParams.e2e-network-prefix"),' PoP node config from above, then click\n"Save". See ',(0,r.kt)("a",{parentName:"li",href:"/docs/runbook/Routing#routing-node-prefix-alloc"},"Node Prefix Allocation"),"\nfor additional details. For example:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "prefixAllocParams": {\n    "allocPrefixLen": 64,\n    "seedPrefix": "2001:a20:c305:ff00::/56"\n  }\n}\n')),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},'Click "Submit" in the top-right corner, then click "Submit" again in the\nconfirmation screen to finalize the changes.')),(0,r.kt)("h4",{id:"deploy-the-pop-configuration"},"Deploy the PoP Configuration"),(0,r.kt)("p",null,"Follow the instructions in the\n",(0,r.kt)("a",{parentName:"p",href:"/docs/runbook/Deployment#deployment-first-pop-configuration"},"First PoP Configuration"),"\nsection to manually provision the PoP node."),(0,r.kt)("a",{id:"quick-start-next-steps"}),(0,r.kt)("h2",{id:"next-steps"},"Next Steps"),(0,r.kt)("p",null,"The following sections describe common Terragraph operations beyond the basic\ninstallation instructions detailed above."),(0,r.kt)("h3",{id:"configure-stats-events-and-logs"},"Configure Stats, Events, and Logs"),(0,r.kt)("p",null,"Nodes can be configured to forward their stats/events to a Kafka broker and\nstream their log files to a Fluentd server. Update the network-wide node config\nand add the IP/hostname of any Docker Swarm host in the following sections:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"statsAgentParams.endpointParams.kafkaParams.config.brokerEndpointList")," (see\n",(0,r.kt)("a",{parentName:"li",href:"/docs/runbook/Deployment#deployment-kafka-configuration"},"Kafka Configuration")," for\ndetails)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"fluentdParams.endpoints")," (see\n",(0,r.kt)("a",{parentName:"li",href:"/docs/runbook/Deployment#deployment-fluentd-configuration"},"Fluentd Configuration")," for\ndetails)")),(0,r.kt)("p",null,"Afterwards, stats will be viewable in Prometheus (relative URL ",(0,r.kt)("inlineCode",{parentName:"p"},"/prometheus/"),")\nas well as Grafana (relative URL ",(0,r.kt)("inlineCode",{parentName:"p"},"/grafana/"),"), and logs will be viewable in\nKibana (relative URL ",(0,r.kt)("inlineCode",{parentName:"p"},"/kibana/"),")."),(0,r.kt)("h3",{id:"ssh-access"},"SSH Access"),(0,r.kt)("p",null,"To authorize direct access to the nodes via SSH, follow the instructions below.\nFor more details on this process, see\n",(0,r.kt)("a",{parentName:"p",href:"/docs/runbook/Deployment#deployment-ssh-configuration"},"SSH Configuration"),"."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"On a secure server, use ",(0,r.kt)("inlineCode",{parentName:"li"},"ssh-keygen")," to generate a certificate authority (CA)\nkey pair.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ ssh-keygen -f ~/.ssh/tg-CA -t ed25519\n")),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Save the contents of the public key, ",(0,r.kt)("inlineCode",{parentName:"li"},"~/.ssh/tg-CA.pub"),", in a new network\nconfig field called ",(0,r.kt)("inlineCode",{parentName:"li"},"sysParams.sshTrustedUserCAKeys.<key_name>"),' in the\n"Node Config" menu.',(0,r.kt)("p",{align:"center"},(0,r.kt)("img",{src:"/quick_start/tg_CA.png",width:"960"}))),(0,r.kt)("li",{parentName:"ol"},"Use the private key to sign each user's public key. In this example, the\nuser's public key has been saved on the secure server as ",(0,r.kt)("inlineCode",{parentName:"li"},"/tmp/user.pub"),".\nThis will generate a certificate in ",(0,r.kt)("inlineCode",{parentName:"li"},"/tmp")," called ",(0,r.kt)("inlineCode",{parentName:"li"},"user-cert.pub"),"."),(0,r.kt)("li",{parentName:"ol"},"Send ",(0,r.kt)("inlineCode",{parentName:"li"},"user-cert.pub")," back to the user."),(0,r.kt)("li",{parentName:"ol"},"The user should save the certificate to the same directory as the private key\nfile (",(0,r.kt)("inlineCode",{parentName:"li"},"user"),"). Usually this is in ",(0,r.kt)("inlineCode",{parentName:"li"},"~/.ssh")," on the user's machine."),(0,r.kt)("li",{parentName:"ol"},"Start ",(0,r.kt)("inlineCode",{parentName:"li"},"ssh-agent")," and add the keys to the agent.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ cd ~/.ssh\n$ eval ssh-agent\n$ ssh-add user\n$ ssh -A root@<node_ipv6_address>\n")),(0,r.kt)("h3",{id:"terragraph-api-access"},"Terragraph API Access"),(0,r.kt)("p",null,"The Terragraph E2E controller and NMS aggregator API documentation can be found\non any of the Docker Swarm hosts."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"https://<host>/api/<controller_name>/docs/\n")),(0,r.kt)("p",null,"Use cURL to issue a command to the API service from the command line as such."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# e.g. \"Get Topology\"\n$ curl -id '{}' https://<host>/api/<controller_name>/api/getTopology\n")),(0,r.kt)("h3",{id:"using-the-tg-cli"},"Using the TG CLI"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"tg")," is a Python-based command-line utility for interfacing with the Terragraph\nsoftware stack. Documentation for all commands is available via the ",(0,r.kt)("inlineCode",{parentName:"p"},"tg help"),"\ncommand. From any node, simply run ",(0,r.kt)("inlineCode",{parentName:"p"},"tg help"),". From any of the Docker Swarm\nhosts, run ",(0,r.kt)("inlineCode",{parentName:"p"},"tg-<controller_name> help"),"."),(0,r.kt)("h3",{id:"log-viewing"},"Log Viewing"),(0,r.kt)("p",null,"This section describes how to view logs generated by the nodes and Terragraph\ncloud services."),(0,r.kt)("h4",{id:"node-logs"},"Node Logs"),(0,r.kt)("p",null,"See ",(0,r.kt)("a",{parentName:"p",href:"/docs/runbook/Troubleshooting#troubleshooting-logs"},"Logs"),"."),(0,r.kt)("h4",{id:"cloud-service-logs"},"Cloud Service Logs"),(0,r.kt)("p",null,"To view a list of all Terragraph services, run the following command from any of\nthe Docker Swarm hosts."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ docker service ls\n")),(0,r.kt)("p",null,"To view the logs for a Terragraph cloud service, run the following command from\nany of the Docker Swarm hosts. Note that Docker does not guarantee that the\nservice logs be in order."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ docker service logs <service_name>\n")),(0,r.kt)("p",null,"Additional parameters can be provided to follow the log output or specify a time\nrange."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ docker service logs -f --since 5m <service_name>\n")),(0,r.kt)("h3",{id:"software-upgrades"},"Software Upgrades"),(0,r.kt)("p",null,"See ",(0,r.kt)("a",{parentName:"p",href:"/docs/runbook/Maintenance#maintenance-upgrades"},"Software Upgrades")," for how to upgrade\nboth the E2E and Terragraph node images."))}c.isMDXComponent=!0}}]);