<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-runbook/Deployment">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="search" type="application/opensearchdescription+xml" title="Terragraph" href="/opensearch.xml">
<link rel="stylesheet" href="/katex/katex.min.css"><title data-rh="true">Deployment and Installation | Terragraph</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://terragraph.com/logo/terragraph-logo-full-RGB.png"><meta data-rh="true" name="twitter:image" content="https://terragraph.com/logo/terragraph-logo-full-RGB.png"><meta data-rh="true" property="og:url" content="https://terragraph.com/docs/runbook/Deployment"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Deployment and Installation | Terragraph"><meta data-rh="true" name="description" content="This document describes the installation procedure for the E2E controller and"><meta data-rh="true" property="og:description" content="This document describes the installation procedure for the E2E controller and"><link data-rh="true" rel="icon" href="/logo/terragraph-logo-favicon-32x32-full-RGB.png"><link data-rh="true" rel="canonical" href="https://terragraph.com/docs/runbook/Deployment"><link data-rh="true" rel="alternate" href="https://terragraph.com/docs/runbook/Deployment" hreflang="en"><link data-rh="true" rel="alternate" href="https://terragraph.com/docs/runbook/Deployment" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://TB9T0CGM6Y-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.48218837.css">
<link rel="preload" href="/assets/js/runtime~main.ee1b3ecd.js" as="script">
<link rel="preload" href="/assets/js/main.feb34f19.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/logo/terragraph-logo-favicon-32x32-full-RGB.svg" alt="Terragraph Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/logo/terragraph-logo-favicon-32x32-white-RGB.svg" alt="Terragraph Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/terragraph/meta-terragraph" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link githubButton navbarIconButton" title="GitHub"></a><a href="https://discord.gg/HQaxCevzus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link discordButton navbarIconButton" title="Discord"></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Docs</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/runbook">Runbook</a></li><li><a class="dropdown__link" href="/docs/developer">Developer Manual</a></li><li><a class="dropdown__link" href="/docs/whitepapers">Whitepapers</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/runbook">Runbook</a><button aria-label="Toggle the collapsible sidebar category &#x27;Runbook&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/runbook/Overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/runbook/Quick_Start">Quick Start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/runbook/Planning">Network Planning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/runbook/Deployment">Deployment and Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/runbook/Maintenance">Maintenance and Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/runbook/Monitoring">Monitoring and Alerting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/runbook/Routing">Routing and Traffic Engineering</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/runbook/Testing">Testing and Measurements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/runbook/Troubleshooting">Troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/runbook/Appendix">Appendix</a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/runbook"><span itemprop="name">Runbook</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Deployment and Installation</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Deployment and Installation</h1><p>This document describes the installation procedure for the E2E controller and
configuring nodes for communication with the controller.</p><a id="deployment-cloud"></a><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cloud-services">Cloud Services<a class="hash-link" href="#cloud-services" title="Direct link to heading">​</a></h2><p>This section describes the installation and initial configuration of the full
Terragraph cloud suite, including E2E services and the NMS backend. The
Terragraph cloud suite is deployed as a Docker Swarm.</p><a id="deployment-cloud-docker-swarm-installation"></a><h3 class="anchor anchorWithStickyNavbar_LWe7" id="docker-swarm-installation">Docker Swarm Installation<a class="hash-link" href="#docker-swarm-installation" title="Direct link to heading">​</a></h3><p>Since Terragraph uses the Docker ecosystem, it would be helpful to be familiar
with <a href="https://docs.docker.com/engine/docker-overview/" target="_blank" rel="noopener noreferrer">Docker</a> and <a href="https://docs.docker.com/engine/swarm/" target="_blank" rel="noopener noreferrer">Docker Swarm</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="system-requirements">System Requirements<a class="hash-link" href="#system-requirements" title="Direct link to heading">​</a></h4><p>Docker Swarm recommends at least 3 (Docker) hosts for redundancy. If redundancy
is not required, the cloud suite can be run on a single host. To support a
network composed of roughly 512 sectors, each Docker host must meet the
following specifications.</p><ul><li>Ubuntu 18.04</li><li>4 vCPU</li><li>16GB of RAM</li><li>200GB of disk space</li><li>Globally addressable IPv6 and private (or global) IPv4</li><li>A unique and static hostname for each Docker node</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="partitioning-scheme">Partitioning Scheme<a class="hash-link" href="#partitioning-scheme" title="Direct link to heading">​</a></h4><p>Below is a suggested filesystem partitioning scheme for the Docker hosts. By
default, all of the Terragraph-specific data is stored in <code>/opt/terragraph</code>.</p><table><thead><tr><th>Partition</th><th>Size</th><th>Description</th></tr></thead><tbody><tr><td><code>/opt</code></td><td>130GB</td><td>Storage for all Terragraph data</td></tr><tr><td><code>/var/lib/docker</code></td><td>50GB</td><td>Storage for all Docker data</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a class="hash-link" href="#installation" title="Direct link to heading">​</a></h4><p>Terragraph comes with an installer that deploys and configures the Terragraph
cloud suite. The installer is a PEX file which packages together Ansible, a
Python CLI, and all of their dependencies into a single executable. An
installation host that has SSH access to all the Docker hosts is necessary to
run the installer. The installation host can be one of the Docker hosts.</p><p>For up-to-date installation instructions, see the <a href="https://github.com/terragraph/tgnms" target="_blank" rel="noopener noreferrer">Terragraph NMS</a> repository.</p><ol><li>Download the installer (<code>nms</code>) on the installation host.</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://github.com/terragraph/tgnms/releases/latest/download/nms</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Make the <code>nms</code> binary executable.</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> +x nms</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>Install Python 3.8 (<code>python3.8</code>) on the installation host, and optionally
install <code>ssh-pass</code> if password-based SSH is used to access the Docker hosts.</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> python3-distutils-extra</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> python3.8</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>Create the config file.</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./nms show-defaults </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> config.yml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="5"><li><p>Open and edit <code>config.yml</code>. The config options are documented within the
config file. Replace the &quot;NMS Web Login&quot; credentials and change
<code>ansible_user</code> to be the username on the installation host. If identity and
access management is desired (recommended), follow the steps in the section
<a href="#deployment-keycloak-configuration">Identity and Access Management Configuration</a>.</p></li><li><p>Run the installer. <code>tg-docker-host-XX</code> are placeholders for the IP addresses
or hostnames of the Docker hosts. All Docker hosts must be provided to the
<code>install</code> command. Include the private key and SSL certificate file for the
Nginx server as arguments and set <code>ext_nms_hostname</code> to configure the
location of the certs in the Docker path.</p></li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./nms </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> -f config.yml -k </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">ssl-key-file</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> -C </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">ssl-cert-file</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -h tg-docker-host-01 </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-h tg-docker-host-02</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-h tg-docker-host-03</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="7"><li>Open a web browser and navigate to the IP address of any of the Docker hosts
to load the NMS UI. Select the &quot;Network Config&quot; menu, then select the
&quot;Controller&quot; tab and change the configuration fields listed in the table
below. Be sure to change <code>&lt;network&gt;</code> to the name of the network (under
<code>controllers_list</code> in the <code>nms</code> installer config file).</li></ol><table><thead><tr><th>Key</th><th>Value</th></tr></thead><tbody><tr><td><code>flags.stats_agent_input_sock_url</code></td><td><code>&quot;tcp://stats_agent-&lt;network&gt;:4231&quot;</code></td></tr><tr><td><code>statsAgentParams.endpointParams.kafkaParams.config.brokerEndpointList</code></td><td><code>&quot;PLAINTEXT://kafka:9092&quot;</code></td></tr><tr><td><code>statsAgentParams.sources.controller.zmq_url</code></td><td><code>&quot;tcp://e2e_controller-&lt;network&gt;:28989&quot;</code></td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="deploying-additional-networks">Deploying Additional Networks<a class="hash-link" href="#deploying-additional-networks" title="Direct link to heading">​</a></h4><p>To add additional networks to a Docker Swarm deployment (i.e. networks managed
by the same NMS instance), edit the <code>config.yml</code> file and add new entries to
<code>controllers_list</code>, then re-run the <code>install</code> command above. Note that this will
cause some downtime to running services, including those for existing networks.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="legacy-installation">Legacy Installation<a class="hash-link" href="#legacy-installation" title="Direct link to heading">​</a></h3><p>Legacy Terragraph deployments make use of systemd for running the E2E stack.
The NMS stack can no longer be installed with this method.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="e2e-services">E2E Services<a class="hash-link" href="#e2e-services" title="Direct link to heading">​</a></h4><p>The installation steps for services contained within the E2E software image are
described below.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="container-requirements">Container Requirements<a class="hash-link" href="#container-requirements" title="Direct link to heading">​</a></h5><p>The following specifications support a network with roughly 512 sectors.</p><ul><li>CentOS 7 or Ubuntu 17+</li><li>2 vCPU</li><li>12GB of RAM</li><li>40GB of disk space</li></ul><h6 class="anchor anchorWithStickyNavbar_LWe7" id="reserved-ports">Reserved Ports<a class="hash-link" href="#reserved-ports" title="Direct link to heading">​</a></h6><p>The cloud services use the following ports by default to communicate with each
other and the Terragraph nodes:</p><table><thead><tr><th>Port</th><th>External</th><th>Description</th></tr></thead><tbody><tr><td><code>6881</code></td><td>Yes</td><td>Used by libtorrent to seed upgrade images.</td></tr><tr><td><code>6969</code></td><td>Yes</td><td>Opentracker serves the torrent tracker on this port.</td></tr><tr><td><code>7007</code></td><td>Yes</td><td>Management communication port between E2E controller and nodes.</td></tr><tr><td><code>8002</code></td><td>Yes</td><td>NMS aggregator listens on this port for stats from nodes.</td></tr><tr><td><code>8080</code></td><td>Yes</td><td>API service runs on this port.</td></tr><tr><td><code>55555</code></td><td>Yes</td><td>Used by primary and backup controller to send and receive HA messages.</td></tr><tr><td><code>17077</code></td><td>No</td><td>Used for communication between various E2E controller apps.</td></tr><tr><td><code>17078</code></td><td>No</td><td>Used for streaming from the controller to API service, currently disabled.</td></tr><tr><td><code>18100</code></td><td>No</td><td>Used for communication between various NMS aggregator apps.</td></tr><tr><td><code>27007</code></td><td>No</td><td>Used by controller to publish stats to cloud-based stats agent.</td></tr><tr><td><code>28989</code></td><td>No</td><td>Used by controller to publish stats to cloud-based stats agent.</td></tr></tbody></table><p>The external column indicates whether or not that port must be externally
accessible. Note that <code>17077</code> and <code>18100</code> may have to be externally accessible
if API service is not in the same network.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="pre-installation">Pre-Installation<a class="hash-link" href="#pre-installation" title="Direct link to heading">​</a></h5><p>Have the following information available before installing the E2E controller:</p><ul><li>An IPv6 network prefix that will be used to address the Terragraph nodes. This
prefix will need to be reachable from the E2E controller when it is installed.</li><li>A route (possibly via a default) from a PoP node to the E2E controller
machine(s). This can be static or learned from BGP.</li><li>A copy of the Terragraph E2E image (x86).</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="installation-1">Installation<a class="hash-link" href="#installation-1" title="Direct link to heading">​</a></h5><p><em>Note: The following installation steps have been tested on Ubuntu 17.10. Some
commands and paths may differ for CentOS.</em></p><ol><li>Copy the Terragraph E2E image to the server and extract it to <code>/opt/rootfs</code>
(or another directory).</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">scp</span><span class="token plain"> e2e-image-tgx86.tar.gz my-e2e-controller01:/tmp/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> /opt/rootfs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> xvzf e2e-image-tgx86.tar.gz -C /opt/rootfs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Create the environment file in <code>/etc/default/tg_services</code>. See
<code>/etc/tg_systemd_config/README.md</code> for additional details.</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> /etc/default/tg_services</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">E2E_ROOTFS</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;/opt/rootfs&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">API_ROOTFS</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;/opt/rootfs&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">NMS_ROOTFS</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;/opt/rootfs&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">AGENT_ROOTFS</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;/opt/rootfs&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">DATA_DIR</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;/root/data&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Relative to DATA_DIR</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">E2E_TOPOLOGY_FILE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;/e2e-topology.conf&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">E2E_CONFIG_FILE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;/cfg/controller_config.json&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">NMS_CONFIG_FILE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;/cfg/aggregator_config.json&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Additional CLI flags</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">API_ARGS</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;-http_port 8080&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>Create the external &quot;data&quot; directory (<code>DATA_DIR</code> in the environment file).</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> /root/data</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>Install and enable the systemd service scripts.</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> /opt/rootfs/etc/tg_systemd_config/*.service /lib/systemd/system/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ systemctl daemon-reload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># E2E controller</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ systemctl </span><span class="token builtin class-name">enable</span><span class="token plain"> e2e_controller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ systemctl </span><span class="token builtin class-name">enable</span><span class="token plain"> opentracker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># NMS aggregator</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ systemctl </span><span class="token builtin class-name">enable</span><span class="token plain"> nms_aggregator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># API Service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ systemctl </span><span class="token builtin class-name">enable</span><span class="token plain"> api_service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Stats agent</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ systemctl </span><span class="token builtin class-name">enable</span><span class="token plain"> stats_agent</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="5"><li>Create an empty topology file (<code>E2E_TOPOLOGY_FILE</code> in the environment file)
within the &quot;data&quot; directory.</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">touch</span><span class="token plain"> /root/data/e2e-topology.conf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="6"><li>Copy the default E2E controller configuration file into the actual file
location (<code>E2E_CONFIG_FILE</code> in the environment file). If needed, change
<code>statsAgentParams.endpointParams.kafkaParams.config.brokerEndpointList</code> to
the list of Kafka broker URLs. See
<code>/etc/e2e_config/controller_config_metadata.json</code> for additional details.</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> /opt/rootfs/etc/e2e_config/controller_config_default.json </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /root/data/cfg/controller_config.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="7"><li>Copy the default NMS aggregator configuration file into the actual file
location (<code>NMS_CONFIG_FILE</code> in the environment file). If needed, change
<code>dataEndpoints.nms.host</code> to the URL prefix of the desired data endpoint.
See <code>/etc/stats_config/aggregator_config_metadata.json</code> for additional
details.</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> /opt/rootfs/etc/stats_config/aggregator_config_default.json </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /root/data/cfg/aggregator_config.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="high-availability">High Availability<a class="hash-link" href="#high-availability" title="Direct link to heading">​</a></h5><p>The E2E controller can be installed in High Availability (HA) mode, where a
backup E2E controller runs passively on a separate machine and takes over if the
primary controller fails. HA mode is <em>strongly recommended</em>, as Terragraph
heavily relies on the E2E controller for normal network operation.</p><p>To enable HA mode, follow the installation steps above on both machines, with
the following changes:</p><ul><li>In the E2E controller configuration file (<code>E2E_CONFIG_FILE</code>), additional flags
must be set. <code>bstar_primary</code> should be &quot;true&quot; on the primary controller and
&quot;false&quot; on the backup controller.</li></ul><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;flags&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;bstar_peer_host&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;hostname or IPv6 address of the other controller&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;bstar_primary&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>In the environment file (<code>/etc/default/tg_services</code>), set a different value
for <code>AGENT_MAC</code> on the backup controller, as shown below.</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">AGENT_MAC</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:0:0:0:0:1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Do not enable the nms_aggregator systemd service on the backup machine.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nms-post-installation">NMS Post-Installation<a class="hash-link" href="#nms-post-installation" title="Direct link to heading">​</a></h3><p>Post-installation configuration steps for the Terragraph NMS are described
below.</p><a id="deployment-nms-setup-options"></a><h4 class="anchor anchorWithStickyNavbar_LWe7" id="setup-options">Setup Options<a class="hash-link" href="#setup-options" title="Direct link to heading">​</a></h4><p>NMS parameters can be configured by editing the file
<code>/opt/terragraph/gfs/nms/env/nms_custom.env</code>. All available parameters are
described in the table below.</p><table><thead><tr><th>Key</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>API_REQUEST_TIMEOUT</code></td><td>integer</td><td>When NMS makes an external API request, the request will be canceled if the response takes longer than <code>API_REQUEST_TIMEOUT</code> milliseconds. <br> <strong>Default:</strong> <code>5000</code></td></tr><tr><td><code>COMMIT_DATE</code></td><td>string</td><td>Commit date for the NMS build. Use this to show the user the release date of the NMS. This is normally set automatically. This can be in any format as it&#x27;s merely displayed in the UI.</td></tr><tr><td><code>COMMIT_HASH</code></td><td>string</td><td>Commit hash for the NMS build. Use this to show the user the exact source control commit that this build was generated from. This is normally set automatically. This can be in any format as it&#x27;s merely displayed in the UI.</td></tr><tr><td><code>E2E_DL_URL</code></td><td>string</td><td>The URL sent to the E2E controller to download node images uploaded via the UI. The format is <code>&lt;SCHEMA&gt;://&lt;IP OR HOST&gt;</code>, ex.<code>http://nms-domain</code>. Do not leave a trailing <code>/</code>. If the E2E controller and the UI run on the same host, use <code>http://localhost</code>.</td></tr><tr><td><code>http_proxy</code></td><td>string</td><td>Send external HTTP requests to the following URL. Note that this environment variable is <em>lowercase</em> due to the hosting environment.</td></tr><tr><td><code>ISSUES_URL</code></td><td>string</td><td>URL to a bug tracker for logging issues with the NMS.</td></tr><tr><td><code>LOG_LEVEL</code></td><td>enum (debug, info, warning, error)</td><td>NMS logs information to the console with varying degrees of verbosity. Higher verbosity log levels also show messages from less verbose levels. The most verbose is &quot;debug&quot;, the least verbose is &quot;error&quot;. <br> <strong>Default:</strong> <code>info</code></td></tr><tr><td><code>NODE_ENV</code></td><td>enum (development, production)</td><td>Which mode to run the NMS process in. Development mode will reload the server when files change and enable logging to the console. Production mode will generate a static build and will log JSON to standard out. <br> <strong>Default:</strong> <code>production</code></td></tr><tr><td></td><td></td><td></td></tr><tr><td><strong>Alerting (BETA)</strong></td><td></td><td></td></tr><tr><td><code>ALARMS_ENABLED</code></td><td>boolean</td><td>Enables the unified alarm configuration UI. <br> <strong>Depends on:</strong> <code>ALERTMANAGER_CONFIG_URL</code>, <code>ALERTMANAGER_URL</code>, <code>PROMETHEUS_CONFIG_URL</code>, <code>TG_ALARM_URL</code>  <br> <strong>Default:</strong> <code>false</code></td></tr><tr><td><code>ALERTMANAGER_CONFIG_URL</code></td><td>string</td><td>URL of the Alertmanager configuration service. <br> <strong>Default:</strong> <code>http://alertmanager_configurer:9101</code></td></tr><tr><td><code>ALERTMANAGER_URL</code></td><td>string</td><td>URL of the Prometheus Alertmanager. <br> <strong>Default:</strong> <code>http://alertmanager:9093</code></td></tr><tr><td><code>PROMETHEUS_CONFIG_URL</code></td><td>string</td><td>URL of the Prometheus configuration service. <br> <strong>Default:</strong> <code>http://prometheus_configurer:9100</code></td></tr><tr><td><code>TG_ALARM_URL</code></td><td>string</td><td>Hostname of the Terragraph event alarms service. <br> <strong>Default:</strong> <code>http://alarms:40000</code></td></tr><tr><td></td><td></td><td></td></tr><tr><td><strong>Authentication</strong></td><td></td><td></td></tr><tr><td><code>CLIENT_ROOT_URL</code></td><td>string</td><td>Base URL of the NMS. This should be the user-visible URL to access the NMS homepage (i.e. what a user would see in their browser address bar).</td></tr><tr><td><code>KEYCLOAK_CLIENT_ID</code></td><td>string</td><td>Keycloak client ID to use. This must be retrieved from Keycloak if set manually.</td></tr><tr><td><code>KEYCLOAK_CLIENT_SECRET</code></td><td>string</td><td>Keycloak client secret to use. This must be retrieved from Keycloak if set manually.</td></tr><tr><td><code>KEYCLOAK_HOST</code></td><td>string</td><td>URL of the Keycloak server to authenticate with. Full URLs are allowed here for cases where Keycloak is not served under the root hostname.</td></tr><tr><td><code>KEYCLOAK_HTTP_PROXY</code></td><td>string</td><td>Send all Keycloak-related HTTP requests through this proxy. There are occasions where most services are hosted within an internal network behind a proxy, but the Keycloak authorization server may be on the public internet. In this case, Keycloak related requests must be sent through a different proxy than the default HTTP proxy. If this variable is not set, this falls back to http_proxy. If neither is set, this is n/a.</td></tr><tr><td><code>KEYCLOAK_REALM</code></td><td>string</td><td>Keycloak realm to authenticate the user with. This must be retrieved from Keycloak if set manually.</td></tr><tr><td><code>LOGIN_ENABLED</code></td><td>boolean</td><td>Enables authentication for NMS. Authentication is handled by integrating with Keycloak. <br> <strong>Depends on:</strong> <code>CLIENT_ROOT_URL</code>, <code>KEYCLOAK_HOST</code>, <code>KEYCLOAK_REALM</code>, <code>KEYCLOAK_CLIENT_ID</code>, <code>KEYCLOAK_CLIENT_SECRET</code> <br> <strong>Default:</strong> <code>false</code></td></tr><tr><td><code>SESSION_MAX_AGE_MS</code></td><td>integer</td><td>How long a user&#x27;s login cookie will last. <br> <strong>Default:</strong> <code>86400000</code></td></tr><tr><td><code>SSO_ENABLED</code></td><td>boolean</td><td>Enables Single Sign-On (SSO) functionality through Keycloak. <br> <strong>Depends on:</strong> <code>CLIENT_ROOT_URL</code>, <code>KEYCLOAK_HOST</code>, <code>KEYCLOAK_REALM</code>, <code>KEYCLOAK_CLIENT_ID</code>, <code>KEYCLOAK_CLIENT_SECRET</code> <br> <strong>Default:</strong> <code>false</code></td></tr><tr><td></td><td></td><td></td></tr><tr><td><strong>Mapbox</strong></td><td></td><td></td></tr><tr><td><code>MAPBOX_ACCESS_TOKEN</code></td><td>string</td><td>Access token for the Mapbox account.</td></tr><tr><td><code>TILE_STYLE</code></td><td>comma separated strings</td><td>A comma separated list of tile names and URLs to display in the UI in the format <code>&lt;NAME&gt;=&lt;TILE STYLES URL&gt;,...</code>. If specified, at least one style must be listed or the UI will default to <strong><a href="https://www.mapbox.com/" target="_blank" rel="noopener noreferrer">Mapbox</a></strong> styles.  <br> <strong>Example:</strong> <code>Night View=night.maptiles.org,Day View=day.maptiles.org</code></td></tr><tr><td></td><td></td><td></td></tr><tr><td><strong>MySQL (or MariaDB)</strong></td><td></td><td></td></tr><tr><td><code>MYSQL_DB</code></td><td>string</td><td>The MySQL database to connect to. <br> <strong>Default:</strong> <code>cxl</code></td></tr><tr><td><code>MYSQL_HOST</code></td><td>string</td><td>The hostname or IP address of the MySQL server to use. <br> <strong>Default:</strong> <code>127.0.0.1</code></td></tr><tr><td><code>MYSQL_PASS</code></td><td>string</td><td>The MySQL password to connect to the database with.</td></tr><tr><td><code>MYSQL_PORT</code></td><td>integer</td><td>The TCP port of the MySQL server to use. <br> <strong>Default:</strong> <code>3306</code></td></tr><tr><td><code>MYSQL_USER</code></td><td>string</td><td>The MySQL user to connect to the database as. <br> <strong>Default:</strong> <code>root</code></td></tr><tr><td></td><td></td><td></td></tr><tr><td><strong>Software Portal</strong></td><td></td><td></td></tr><tr><td><code>SOFTWARE_PORTAL_API_ID</code></td><td>string</td><td>ID of the Terragraph software portal API token. This will be generated when creating the API token. <br> <strong>Default:</strong> <code>tgdev</code></td></tr><tr><td><code>SOFTWARE_PORTAL_API_TOKEN</code></td><td>string</td><td>API token for the Terragraph software portal.</td></tr><tr><td><code>SOFTWARE_PORTAL_URL</code></td><td>string</td><td>URL to the central Terragraph software portal. This is where official Terragraph releases are stored. Setting this variable will enable the software portal feature. <br> <strong>Default:</strong> <code>https://sw.terragraph.link</code></td></tr><tr><td></td><td></td><td></td></tr><tr><td><strong>Stats</strong></td><td></td><td></td></tr><tr><td><code>GRAFANA_URL</code></td><td>string</td><td>Absolute or relative URL to the Grafana UI. This is used to link to certain Grafana dashboards. By default Grafana is hosted under CLIENT_ROOT_URL/grafana. <br> <strong>Default:</strong> <code>grafana</code></td></tr><tr><td><code>PROMETHEUS</code></td><td>string</td><td>URL of the Prometheus service. <br> <strong>Default:</strong> <code>http://prometheus:9090</code></td></tr><tr><td><code>STATS_ALLOWED_DELAY_SEC</code></td><td>integer</td><td>Allowed delay in stats pipeline when showing availability. This is used for stats derived from the Kafka stats stream. <br> <strong>Default:</strong> <code>120</code></td></tr><tr><td></td><td></td><td></td></tr><tr><td><strong>Experimental Features</strong></td><td></td><td></td></tr><tr><td><code>KAFKA_HOSTS</code></td><td>comma separated strings</td><td>Comma separated list of Kafka hosts to pull node events from (see <code>NOTIFICATION_MENU_ENABLED</code>). <br> <strong>Example:</strong> <code>[2001::1]:9092,[2001::2]:9092</code></td></tr><tr><td><code>SERVICE_AVAILABILITY_ENABLED</code></td><td>boolean</td><td>Enables the service availability display in the overview panel. Service availability represents the link&#x27;s ability to carry real traffic at layer 4. <br> <strong>Default:</strong> <code>false</code></td></tr><tr><td><code>NOTIFICATION_MENU_ENABLED</code></td><td>boolean</td><td>Enables the notification menu for streaming events from  Kafka in realtime. <br> <strong>Depends on:</strong> <code>KAFKA_HOSTS</code> <br> <strong>Default:</strong> <code>false</code></td></tr><tr><td><code>DEFAULT_ROUTES_HISTORY_ENABLED</code></td><td>boolean</td><td>Enables the default routes history feature. <br> <strong>Depends on:</strong> <code>DEFAULT_ROUTES_HISTORY_HOST</code> <br> <strong>Default:</strong> <code>false</code></td></tr><tr><td><code>NETWORKTEST_HOST</code></td><td>string</td><td>Hostname of the Terragraph Network Test service.</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="self-hosting-map-tiles-using-openstreetmaps">Self-Hosting Map Tiles Using OpenStreetMaps<a class="hash-link" href="#self-hosting-map-tiles-using-openstreetmaps" title="Direct link to heading">​</a></h4><p>If fetching remote map data in the NMS UI is not possible, the
<strong><a href="https://www.openstreetmap.org/" target="_blank" rel="noopener noreferrer">OpenStreetMaps</a></strong> tiles can be generated locally and hosted in a Docker
tile server container.</p><ul><li>Follow the <a href="https://github.com/openmaptiles/openmaptiles/blob/master/QUICKSTART.md" target="_blank" rel="noopener noreferrer">OpenMapTiles quick-start instructions</a>.</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/openmaptiles/openmaptiles.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">cd</span><span class="token plain"> openmaptiles</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Edit the <code>.env</code> file and change <code>QUICKSTART_MAX_ZOOM</code> to <code>14</code>. Then run the
<code>quickstart.sh</code> script to generate tiles. Generating tiles for a specific
region is possible by adding the <a href="https://github.com/julien-noblet/download-geofabrik#list-of-elements" target="_blank" rel="noopener noreferrer">region name</a> as the first parameter.</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./quickstart.sh </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">REGION NAME</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> start-tileserver</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>The tile server will now be running on port 8080 via <strong><a href="https://docs.docker.com/compose/install/#install-compose" target="_blank" rel="noopener noreferrer">docker-compose</a></strong>.</li><li>Specify the <code>TILE_STYLE</code> parameter by following the
<a href="#deployment-nms-setup-options">Setup Options</a> for the UI.</li></ul><a id="deployment-keycloak-configuration"></a><h3 class="anchor anchorWithStickyNavbar_LWe7" id="identity-and-access-management-configuration">Identity and Access Management Configuration<a class="hash-link" href="#identity-and-access-management-configuration" title="Direct link to heading">​</a></h3><p>Access management is handled by <a href="https://www.keycloak.org/" target="_blank" rel="noopener noreferrer">Keycloak</a>, an open source Identity and Access
Management (IAM) system. Keycloak is capable of integrating with many identity
providers such as Facebook and Google, as well as storing users inside its own
database.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="installing-and-enabling-keycloak">Installing and Enabling Keycloak<a class="hash-link" href="#installing-and-enabling-keycloak" title="Direct link to heading">​</a></h4><p>The following variables must be set in
<a href="#deployment-cloud-docker-swarm-installation">config.yml</a>:</p><ul><li><code>keycloak_enabled</code></li><li><code>nms_username</code> - The username of the default NMS administrator.</li><li><code>nms_password</code> - The password of the default NMS administrator.</li><li><code>ext_nms_hostname</code> - Must be set to the externally visible NMS hostname
(whatever a user would type into their browser&#x27;s address bar). An
IP address is also acceptable.</li><li><code>keycloak_root_user</code> - The username of the default Keycloak administrator.</li><li><code>keycloak_root_password</code> - The password of the default Keycloak administrator.</li><li><code>keycloak_db_user</code> - The username of the Keycloak MySQL user.</li><li><code>keycloak_db_password</code> - The password of the Keycloak MySQL user.</li></ul><p>It is recommended to change <code>keycloak_root_password</code> and
<code>keycloak_db_password</code> from their defaults.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="logging-into-the-nms-for-the-first-time">Logging into the NMS for the first time<a class="hash-link" href="#logging-into-the-nms-for-the-first-time" title="Direct link to heading">​</a></h4><p>After successfully running the Ansible installer, visit the URL set in
<code>ext_nms_hostname</code> in a web browser. The user will be shown a login page.</p><p align="center"><img loading="lazy" src="/nms/nms_signin.png" width="360" class="img_ev3q"></p><p>Enter the <code>nms_username</code> and <code>nms_password</code> variables from
<a href="#deployment-cloud-docker-swarm-installation">config.yml</a> as the username and password.
User access to Terragraph NMS may be configured by following the instructions
in the section below.</p><a id="deployment-configuring-keycloak"></a><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-user-access-to-terragraph-nms">Configuring User Access to Terragraph NMS<a class="hash-link" href="#configuring-user-access-to-terragraph-nms" title="Direct link to heading">​</a></h4><p>User authentication may be handled directly by Keycloak or by an external
Identity Provider such as Facebook or Google. This guide will detail how to add
a new user to Keycloak directly. Please consult the Keycloak documentation for
instructions on configuring an external Identity Provider.</p><p>First, the user must sign in to the Keycloak administration dashboard by
visiting <code>/auth</code> in a browser.</p><p align="center"><img loading="lazy" src="/nms/keycloak_homepage.png" width="1000" class="img_ev3q"></p><p>Click on the &quot;Administration Console&quot; link. Enter the username and password used
as the <code>keycloak_root_user</code> and <code>keycloak_root_password</code> variables in
config.yml.</p><p>Once logged in to the Keycloak administration dashboard, select the &quot;TGNMS&quot;
realm from the dropdown at the upper-left of the screen. Click the &quot;Users&quot; link
on the left sidebar. To view the users in the &quot;TGNMS&quot; realm, search for a user
using the search bar or click the &quot;View all users&quot; button.</p><p align="center"><img loading="lazy" src="/nms/keycloak_users.png" width="1000" class="img_ev3q"></p><p>To give a new user access to Terragraph NMS, click the &quot;Add user&quot; button at the
upper-right corner of the users table. Input a username for the user.
It is also recommended to set a valid email address so the user may reset
their own password using Keycloak. Optionally, select some
&quot;Required User Actions&quot; for the user to perform when they sign-in. For example,
the administrator may require a user to set a new password and verify their
email.</p><p align="center"><img loading="lazy" src="/nms/keycloak_create_user.png" width="1000" class="img_ev3q"></p><p>Click the &quot;Save&quot; button to create the user. The newly created user must now
be given authorization to access the Terragraph NMS. User authorization is
configured by assigning Keycloak Roles to a user. Click on the
&quot;Role Mappings&quot; tab. To assign roles to a user, select the desired role in the
&quot;Available Roles menu&quot; and click the &quot;Add selected&quot; button. The user&#x27;s new roles
will take effect after their next sign-in.</p><p align="center"><img loading="lazy" src="/nms/keycloak_role_mappings.png" width="1000" class="img_ev3q"></p><p>Note that the &quot;tg_all_read&quot; and &quot;tg_all_write&quot; roles are called
&quot;Composite Roles&quot;. These are roles which contain multiple other roles. For
example, if a user needs full read-access to the NMS, assign them the
&quot;tg_all_read&quot; role and all corresponding read roles will be assigned to them.
This can be demonstrated by assigning either composite role to a user and then
looking at the &quot;Effective Roles&quot; menu on the right side of the &quot;Role Mappings&quot;
screen.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="authorization-and-roles">Authorization and Roles<a class="hash-link" href="#authorization-and-roles" title="Direct link to heading">​</a></h4><p>Roles are used to protect E2E API endpoints, as well as hide UI components in
the Terragraph NMS. Descriptions of each role can be viewed by selecting the
&quot;Roles&quot; link on the left sidebar. The roles required to access each E2E API
endpoint are listed in the E2E API Documentation.</p><p>A role&#x27;s name is broken up into two main parts: category and level. For example,
the <code>tg_ignition_read</code> role has a category of &quot;ignition&quot; and a level of &quot;read&quot;.
If a user has the <code>tg_ignition_write</code> role, they are also able to access APIs
in the same category that require the &quot;read&quot; level (write access implies
read access). A user with the composite role <code>tg_all_write</code> has full
read-write access to all endpoints and UI components.</p><a id="deployment-nodes"></a><h2 class="anchor anchorWithStickyNavbar_LWe7" id="nodes">Nodes<a class="hash-link" href="#nodes" title="Direct link to heading">​</a></h2><p>Some important node deployment steps are highlighted in the sections below.</p><a id="node-information"></a><h3 class="anchor anchorWithStickyNavbar_LWe7" id="node-information">Node Information<a class="hash-link" href="#node-information" title="Direct link to heading">​</a></h3><p>On Puma hardware, the MAC address and serial number of each node are encoded in
a QR code on the back of the device. This is parsed as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SN:&lt;serial number&gt;:M60:&lt;MAC address&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Example:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SN:TG100P05241700057:M60:746FF7CA1A76</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ^^^^^^^^^^^^^^^^^     ^^^^^^^^^^^^</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Serial number   =&gt;  TG100P05241700057</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MAC address     =&gt;  74:6F:F7:CA:1A:76</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><a id="deployment-first-pop-configuration"></a><h3 class="anchor anchorWithStickyNavbar_LWe7" id="first-pop-configuration">First PoP Configuration<a class="hash-link" href="#first-pop-configuration" title="Direct link to heading">​</a></h3><p>The configuration of Terragraph nodes is handled automatically by the E2E
service. However, the first PoP node must be configured manually since
connectivity to the E2E controller has not yet been established.</p><ol><li><p>Add the PoP site and node to the network topology (refer to
<a href="/docs/runbook/Monitoring#monitoring-map-editing">Monitoring and Alerting</a> for details).</p></li><li><p>Create the PoP node configuration (refer to
<a href="/docs/runbook/Maintenance#maintenance-pop-node-config">PoP Node Config</a> for details).</p></li><li><p>Generate the full PoP node configuration JSON using one of these methods:</p><ul><li><p><em>Via NMS:</em> Select the <strong>Node Config</strong> icon from the left-hand toolbar,
click on the &quot;Node&quot; tab on the top bar, then select the PoP node in the
left-hand column. Click <strong>Show Full Configuration</strong> on the bottom-left,
make sure the correct versions are selected, then click <strong>Copy</strong>.</p></li><li><p><em>Via TG CLI:</em> Run the following command (be sure to substitute the correct
version details):</p></li></ul></li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ tg config get </span><span class="token function" style="color:#d73a49">node</span><span class="token plain"> -n pop-node-name full </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --version RELEASE_M61 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --hardware NXP_LS1048A_PUMA </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --firmware </span><span class="token number" style="color:#36acaa">10.12</span><span class="token plain">.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li><p>Deploy the configuration to the PoP node using one of these methods:</p><ul><li><em>Via SSH (requires a signed SSH key):</em> Log into the node and write the
full configuration JSON (obtained above) to the path
<code>/data/cfg/node_config.json</code>.</li><li><em>Via web portal (must be enabled through <code>envParams.WEBUI_ENABLED</code>):</em> On
hardware that supports Wi-Fi for administrative access, connect to the
node&#x27;s Wi-Fi network and submit the full configuration JSON (obtained
above) using the web portal.</li></ul></li><li><p>Reboot the PoP node. Connectivity to the E2E controller should be established
when the node comes back up.</p></li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">reboot</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="gps-configuration">GPS Configuration<a class="hash-link" href="#gps-configuration" title="Direct link to heading">​</a></h3><p>When deploying a test network with poor GPS visibility (e.g. indoors), nodes
must be configured to disable the GPS synchronization check during link
ignition. If this is applicable, add a network override for the
<code>radioParamsBase.fwParams.forceGpsDisable</code> config to <code>1</code> (see
<a href="/docs/runbook/Maintenance#maintenance-config">Maintenance and Configuration</a>).</p><a id="deployment-ssh-configuration"></a><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ssh-configuration">SSH Configuration<a class="hash-link" href="#ssh-configuration" title="Direct link to heading">​</a></h3><p>SSH access to Terragraph nodes is controlled through SSH certificate authorities
(CAs). The CAs that Terragraph nodes trust are managed via node configuration
(see <a href="/docs/runbook/Maintenance#maintenance-config">Maintenance and Configuration</a>). These
CAs can be used to sign user SSH keys.</p><ol><li>To generate a CA key, use <code>ssh-keygen</code>. It is recommended to use the ed25519
encryption scheme when generating CA and user keys.</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ssh-keygen -f ~/.ssh/tg-CA -t ed25519</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Configure nodes to trust the newly generated CA by adding the contents of
<code>~/.ssh/tg-CA.pub</code> to <code>sysParams.sshTrustedUserCAKeys</code>.</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> ~/.ssh/tg-CA.pub</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>Optionally, disable the default Terragraph CA on the nodes
(<code>/etc/ssh/tg-CA.bak</code>) by setting <code>sysParams.allowFactoryCA</code> to <code>false</code>.</li></ol><a id="deployment-kafka-configuration"></a><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kafka-configuration">Kafka Configuration<a class="hash-link" href="#kafka-configuration" title="Direct link to heading">​</a></h3><p>Stats, events, and other data can be pushed from nodes to a <a href="https://kafka.apache.org/" target="_blank" rel="noopener noreferrer">Kafka</a> broker. To
enable this, add a network override for the
<code>statsAgentParams.endpointParams.kafkaParams.config.brokerEndpointList</code> config
to the list of Kafka broker URLs.
Example:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;statsAgentParams&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;endpointParams&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;kafkaParams&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;config&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;brokerEndpointList&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;PLAINTEXT://[2001::1]:9096,PLAINTEXT://[2001::2]:9096,PLAINTEXT://[2001::3]:9096&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When running in a Docker environment, please note that the node configuration
must use port 9096 (by default), which will differ from the controller
configuration&#x27;s port 9092 (by default).</p><a id="deployment-fluentd-configuration"></a><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fluentd-configuration">Fluentd Configuration<a class="hash-link" href="#fluentd-configuration" title="Direct link to heading">​</a></h3><p>Log files can be pushed from nodes to <a href="https://www.fluentd.org/" target="_blank" rel="noopener noreferrer">Fluentd</a> servers via a <a href="https://fluentbit.io/" target="_blank" rel="noopener noreferrer">Fluent Bit</a>
client. To enable this, add a network override for the <code>fluentdParams.endpoints</code>
config.
Example:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;fluentdParams&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;endpoints&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;exampleServer&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;host&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1111:2222:3333::ffff&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;port&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">24224</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="time-configuration">Time Configuration<a class="hash-link" href="#time-configuration" title="Direct link to heading">​</a></h3><p>The NTP servers that Terragraph nodes use for system clock synchronization are
managed via node configuration (see
<a href="/docs/runbook/Maintenance#maintenance-config">Maintenance and Configuration</a>). By default,
nodes will connect to <code>time.facebook.com</code>. To use custom NTP servers instead, set
a network override for the <code>sysParams.ntpServers</code> config. Note that the server
must have IPv6 (unless NAT64 or IPv4 are supported).
Example:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;sysParams&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;ntpServers&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;ntp1&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1.pool.ntp.org&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;ntp2&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2.pool.ntp.org&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The timezone on Terragraph nodes is set using <code>/etc/localtime</code>. This can point
at any valid <a href="https://en.wikipedia.org/wiki/Tz_database" target="_blank" rel="noopener noreferrer">tz database</a> entry. By default, Terragraph nodes use the <code>UTC</code>
timezone. To change this for all nodes, set a network override for the
<code>envParams.TIMEZONE</code> config (see
<a href="/docs/runbook/Maintenance#maintenance-config">Maintenance and Configuration</a>).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dns-configuration">DNS Configuration<a class="hash-link" href="#dns-configuration" title="Direct link to heading">​</a></h3><p>The DNS servers that Terragraph nodes use for DNS resolution are managed via
node configuration (see
<a href="/docs/runbook/Maintenance#maintenance-config">Maintenance and Configuration</a>). By default,
nodes will use Google&#x27;s public DNS servers (<code>2001:4860:4860::8888</code> and
<code>2001:4860:4860::8844</code>). To use additional DNS servers, add their IPv6 addresses
to <code>sysParams.dnsServers</code>.
Example:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;sysParams&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;dnsServers&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;exampleServer&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1234:1234:ffff::1234&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="wpa-enterprise-8021x-configuration">WPA-Enterprise (802.1X) Configuration<a class="hash-link" href="#wpa-enterprise-8021x-configuration" title="Direct link to heading">​</a></h3><p>Terragraph supports 802.1X for link authentication for enterprise-grade
security. This requires a RADIUS server to be available and reachable from the
nodes, and all Terragraph nodes must contain signed certificates. To enable
802.1X, set a network override for the config keys
<code>radioParamsBase.fwParams.wsecEnable</code> (to <code>2</code>) and <code>eapolParams</code>, as shown below:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;radioParamsBase&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;fwParams&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;wsecEnable&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;eapolParams&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;ca_cert_path&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/data/secure/keys/ca.pem&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;client_cert_path&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/data/secure/keys/client.pem&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;private_key_path&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/data/secure/keys/client.key&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;radius_server_ip&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1234:5678:9abc::def&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;radius_server_port&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1812</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;radius_user_identity&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;some-user&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;secrets&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;private_key_password&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;some-passphrase&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;radius_server_shared_secret&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;some-secret&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;radius_user_password&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;some-password&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>By default, 802.1X is disabled, and links are authenticated using WPA-PSK.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="channel-configuration">Channel Configuration<a class="hash-link" href="#channel-configuration" title="Direct link to heading">​</a></h3><p>The wireless channel can be manually configured for each node or assigned
across the entire network. For automatic assignment, only channel 2 is enabled
by default but the set of enabled channels can be configured via the
<code>topologyParams.enabledChannels</code> controller configuration field.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="disabling-linux-serial-console">Disabling Linux Serial Console<a class="hash-link" href="#disabling-linux-serial-console" title="Direct link to heading">​</a></h3><p>The Linux serial console (<code>/dev/ttyS0</code>) is enabled on nodes by default. To
disable it (e.g. for security reasons), set the
<code>envParams.SERIAL_CONSOLE_DISABLE</code> config to <code>1</code> (see <a href="/docs/runbook/Maintenance#maintenance-config">Maintenance and
Configuration</a>). Please be aware this may
make it impossible to recover a node.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dhcp-pd-and-ds-lite">DHCP, PD, and DS-Lite<a class="hash-link" href="#dhcp-pd-and-ds-lite" title="Direct link to heading">​</a></h3><p><em>Please note these features are only supported on the Rev5 platform.</em></p><p><a href="https://tools.ietf.org/html/rfc6333" target="_blank" rel="noopener noreferrer">Dual-Stack Lite</a> (or DS-Lite) allows IPv4 to work natively in an IPv6 access
network. Terragraph supports DS-Lite as a solution for dual-stack deployments.
DS-Lite involves two network services: AFTR (Address Family Transition Router)
and B4 (Basic Bridging BroadBand). The IPv6 address of the AFTR is required for
setup. The CPE will run the B4 function as long as it supports DS-Lite.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ds-lite-architecture">DS-Lite Architecture<a class="hash-link" href="#ds-lite-architecture" title="Direct link to heading">​</a></h4><p align="center"><img loading="lazy" src="/figures/dslite_architecture.svg" width="512" class="img_ev3q"></p><p>DS-Lite requires DHCP prefix delegation. Terragraph Rev5 nodes run <a href="https://kea.isc.org/" target="_blank" rel="noopener noreferrer">Kea</a> as a
DHCP server with all the required configuration options.</p><p>The figure below shows an example Terragraph network with DS-Lite.</p><p align="center"><img loading="lazy" src="/figures/dslite_tg_example.svg" width="1000" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuration">Configuration<a class="hash-link" href="#configuration" title="Direct link to heading">​</a></h4><p>The following section describes the node configuration options for setting up
DHCP prefix delegation and DS-Lite.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="nodes-with-cpes-dhcp">Nodes with CPEs (DHCP)<a class="hash-link" href="#nodes-with-cpes-dhcp" title="Direct link to heading">​</a></h5><p>The table below lists the configuration options in <code>dhcpParams</code>.</p><table><thead><tr><th>Config</th><th>Description</th></tr></thead><tbody><tr><td><code>dhcpInterface</code></td><td>Interface for DHCP (usually same as CPE interface)</td></tr><tr><td><code>dhcpPdDelegatedLen</code></td><td>Length of prefix to be delegated to CPEs</td></tr><tr><td><code>dhcpPdPool</code></td><td>Network pool from which prefixes will be delegated (must be larger than <code>dhcpPdDelegatedLen</code>, or else only one prefix can be delegated)</td></tr><tr><td><code>dhcpPreferredLifetime</code></td><td>DHCP lease preferred lifetime; once this expires, the lease should not be used for new communications</td></tr><tr><td><code>dhcpRenewTimer</code></td><td>DHCP renew timer (T1), usually set to 50% of the preferred lease time</td></tr><tr><td><code>dhcpRebindTimer</code></td><td>DHCP rebind timer (T2), usually set to 87.5% of the preferred lease time</td></tr><tr><td><code>dhcpValidLifetime</code></td><td>Length of time that an address remains in the valid state, during which the address can be used for new or existing communications; when the valid-lifetime expires, the address becomes invalid and can no longer be used</td></tr><tr><td><code>dhcpRangeMin</code></td><td>Start address for regular leases</td></tr><tr><td><code>dhcpRangeMax</code></td><td>Max address for regular leases</td></tr><tr><td><code>keaEnabled</code></td><td>Boolean flag to enable or disable Kea (enabling Kea disables isc-dhcpd)</td></tr><tr><td><code>optionData</code></td><td>Map of DHCP options, with names as the keys and data as the values (refer to the <a href="https://downloads.isc.org/isc/kea/cur/doc/kea-guide.html#dhcp6-std-options-list" target="_blank" rel="noopener noreferrer">DHCPv6 options list</a>)</td></tr><tr><td><code>prefixSplitEnabled</code></td><td>If enabled, splits prefix down to /64 before pushing to hardware (please only enable on Marvell hardware)</td></tr></tbody></table><p>Note that <code>dhcpPdPool</code> is an optional parameter. If it is not set, Kea will try
to split the address allocated to the node for delegation, if possible.</p><p>DS-Lite auto-configuration will not work without prefix delegation. To disable
prefix delegation entirely, leave both <code>dhcpPdDelegatedLen</code> and <code>dhcpPdPool</code>
unset. Please note that the DHCP server is only supported in the Rev5 platform.
On the newer VPP-based platforms, CPE provisioning with DHCPv6 is enabled via a
DHCP relay.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="pop-nodes-bgp">PoP Nodes (BGP)<a class="hash-link" href="#pop-nodes-bgp" title="Direct link to heading">​</a></h5><p>The table below lists the configuration options in <code>bgpParams</code>.</p><table><thead><tr><th>Config</th><th>Description</th></tr></thead><tbody><tr><td><code>cpeNetworkPrefix</code></td><td>Entire prefix used for prefix delegation in a deployment</td></tr><tr><td><code>delegatedNetworkPrefixes</code></td><td>Comma-separated list of specific prefixes desired to be routed from nearby CPEs (defined in <code>dhcpParams.dhcpPdPool</code>)</td></tr></tbody></table><a id="deployment-security-network"></a><h2 class="anchor anchorWithStickyNavbar_LWe7" id="terragraph-network-security">Terragraph Network Security<a class="hash-link" href="#terragraph-network-security" title="Direct link to heading">​</a></h2><p>It is essential to implement proper access control list (ACL) rules to keep the
Terragraph network infrastructure secure. Running Terragraph without any ACL
rules upstream may expose security vulnerabilities. As such, it is critical that
the <code>e2e-network-prefix</code> which the nodes are using be protected from the
Internet by the application of ACL rules upstream.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="inbound">Inbound<a class="hash-link" href="#inbound" title="Direct link to heading">​</a></h3><p>There is no requirement for connections that must be initiated from the Internet
towards a Terragraph node under regular operation.</p><p>A Terragraph node exposed to inbound connections from the internet allows for
vulnerabilities such as:</p><ul><li>SSH access by unauthorized users (by default, trusts the CA in
<code>/etc/ssh/tg-CA.bak</code>)</li><li>NTP amplification attacks</li><li>Route hijacking via BGP (if node is a PoP)</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="outbound">Outbound<a class="hash-link" href="#outbound" title="Direct link to heading">​</a></h3><p>Terragraph nodes may require the following outbound connections (depending on
their configuration):</p><ul><li>DNS -&gt; Google DNS6</li><li>NTP -&gt; <code>time.facebook.com</code></li><li>E2E minion -&gt; E2E controller on TCP port 7007</li><li>Fluent Bit -&gt; configured Fluentd endpoint (TCP)</li><li>Stats agent -&gt; configured Kafka endpoint (TCP)</li><li>Stats agent -&gt; NMS aggregator on TCP port 8002 (<em>off by default</em>)</li><li>HTTPS -&gt; <code>https://graph.facebook.com</code> (for logging stats, <em>off by default</em>)</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/terragraph/meta-terragraph/edit/main/docs/../docs/runbook/Deployment.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_eYIM" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vbeJ"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/runbook/Planning"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Network Planning</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/runbook/Maintenance"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Maintenance and Configuration</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#cloud-services" class="table-of-contents__link toc-highlight">Cloud Services</a><ul><li><a href="#docker-swarm-installation" class="table-of-contents__link toc-highlight">Docker Swarm Installation</a></li><li><a href="#legacy-installation" class="table-of-contents__link toc-highlight">Legacy Installation</a></li><li><a href="#nms-post-installation" class="table-of-contents__link toc-highlight">NMS Post-Installation</a></li><li><a href="#identity-and-access-management-configuration" class="table-of-contents__link toc-highlight">Identity and Access Management Configuration</a></li></ul></li><li><a href="#nodes" class="table-of-contents__link toc-highlight">Nodes</a><ul><li><a href="#node-information" class="table-of-contents__link toc-highlight">Node Information</a></li><li><a href="#first-pop-configuration" class="table-of-contents__link toc-highlight">First PoP Configuration</a></li><li><a href="#gps-configuration" class="table-of-contents__link toc-highlight">GPS Configuration</a></li><li><a href="#ssh-configuration" class="table-of-contents__link toc-highlight">SSH Configuration</a></li><li><a href="#kafka-configuration" class="table-of-contents__link toc-highlight">Kafka Configuration</a></li><li><a href="#fluentd-configuration" class="table-of-contents__link toc-highlight">Fluentd Configuration</a></li><li><a href="#time-configuration" class="table-of-contents__link toc-highlight">Time Configuration</a></li><li><a href="#dns-configuration" class="table-of-contents__link toc-highlight">DNS Configuration</a></li><li><a href="#wpa-enterprise-8021x-configuration" class="table-of-contents__link toc-highlight">WPA-Enterprise (802.1X) Configuration</a></li><li><a href="#channel-configuration" class="table-of-contents__link toc-highlight">Channel Configuration</a></li><li><a href="#disabling-linux-serial-console" class="table-of-contents__link toc-highlight">Disabling Linux Serial Console</a></li><li><a href="#dhcp-pd-and-ds-lite" class="table-of-contents__link toc-highlight">DHCP, PD, and DS-Lite</a></li></ul></li><li><a href="#terragraph-network-security" class="table-of-contents__link toc-highlight">Terragraph Network Security</a><ul><li><a href="#inbound" class="table-of-contents__link toc-highlight">Inbound</a></li><li><a href="#outbound" class="table-of-contents__link toc-highlight">Outbound</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Terragraph</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/runbook/Overview">Overview</a></li><li class="footer__item"><a href="https://www.facebook.com/connectivity" target="_blank" rel="noopener noreferrer" class="footer__link-item">Meta Connectivity<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/terragraph" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/HQaxCevzus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Meta Platforms, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.ee1b3ecd.js"></script>
<script src="/assets/js/main.feb34f19.js"></script>
</body>
</html>