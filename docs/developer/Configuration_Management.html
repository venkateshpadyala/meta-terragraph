<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-developer/Configuration_Management">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="search" type="application/opensearchdescription+xml" title="Terragraph" href="/opensearch.xml">
<link rel="stylesheet" href="/katex/katex.min.css"><title data-rh="true">Configuration Management | Terragraph</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://terragraph.com/logo/terragraph-logo-full-RGB.png"><meta data-rh="true" name="twitter:image" content="https://terragraph.com/logo/terragraph-logo-full-RGB.png"><meta data-rh="true" property="og:url" content="https://terragraph.com/docs/developer/Configuration_Management"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Configuration Management | Terragraph"><meta data-rh="true" name="description" content="This document describes the configuration management system."><meta data-rh="true" property="og:description" content="This document describes the configuration management system."><link data-rh="true" rel="icon" href="/logo/terragraph-logo-favicon-32x32-full-RGB.png"><link data-rh="true" rel="canonical" href="https://terragraph.com/docs/developer/Configuration_Management"><link data-rh="true" rel="alternate" href="https://terragraph.com/docs/developer/Configuration_Management" hreflang="en"><link data-rh="true" rel="alternate" href="https://terragraph.com/docs/developer/Configuration_Management" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://TB9T0CGM6Y-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.48218837.css">
<link rel="preload" href="/assets/js/runtime~main.ee1b3ecd.js" as="script">
<link rel="preload" href="/assets/js/main.feb34f19.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/logo/terragraph-logo-favicon-32x32-full-RGB.svg" alt="Terragraph Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/logo/terragraph-logo-favicon-32x32-white-RGB.svg" alt="Terragraph Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/terragraph/meta-terragraph" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link githubButton navbarIconButton" title="GitHub"></a><a href="https://discord.gg/HQaxCevzus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link discordButton navbarIconButton" title="Discord"></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/runbook">Runbook</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/developer">Developer Manual</a></li><li><a class="dropdown__link" href="/docs/whitepapers">Whitepapers</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/developer">Developer Manual</a><button aria-label="Toggle the collapsible sidebar category &#x27;Developer Manual&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developer/Overview">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/developer/Communication_Protocol">Architecture</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/developer/Beamforming_Link_Adaptation">Firmware Layer</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/developer/Topology_Management">End-to-End (E2E) Service</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developer/Topology_Management">Topology Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developer/Network_Ignition">Network Ignition</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developer/Software_Upgrade">Software Upgrade</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/developer/Configuration_Management">Configuration Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developer/Scans">Scans</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developer/Network_Measurements">Network Measurements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developer/Prefix_Allocation">Prefix Allocation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developer/Topology_Discovery">Topology Discovery</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/developer/Stats_Events_Logs">Application Layer Modules</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/developer/Service_Scripts">System Management</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/developer/Release_Conventions">Version Control</a></div></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/developer"><span itemprop="name">Developer Manual</span></a><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">End-to-End (E2E) Service</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Configuration Management</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Configuration Management</h1><p>This document describes the configuration management system.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="architecture">Architecture<a class="hash-link" href="#architecture" title="Direct link to heading">​</a></h2><p>Terragraph implements a centralized configuration management architecture. The
E2E controller serves as the point of truth for all node configurations, and is
responsible for keeping all nodes&#x27; local copies in sync with its own view. All
config changes are applied using the controller.</p><p align="center"><img loading="lazy" src="/figures/config_architecture.svg" width="500" class="img_ev3q"></p><p>Node configuration is a JSON-serialized Thrift structure (<code>thrift::NodeConfig</code>),
and is generally manipulated using <a href="https://github.com/facebook/folly/blob/master/folly/docs/Dynamic.md" target="_blank" rel="noopener noreferrer">folly::dynamic</a> objects. A node&#x27;s full
configuration is computed by applying several &quot;override&quot; layers on top of the
base configuration for its software version. All configuration files are stored
under the <code>/data/cfg/</code> directory on disk for both the E2E controller and
Terragraph node.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="operations">Operations<a class="hash-link" href="#operations" title="Direct link to heading">​</a></h3><p>The controller&#x27;s <code>ConfigApp</code> accepts the following <em>user operations</em> on the node
configurations:</p><table><thead><tr><th>User Operation</th><th>Commands</th></tr></thead><tbody><tr><td>Get Node Config</td><td><code>GET_CTRL_CONFIG_REQ</code><br><code>GET_CTRL_CONFIG_PATHS_REQ</code></td></tr><tr><td>Get Config Layers</td><td><code>GET_CTRL_CONFIG_BASE_REQ</code><br><code>GET_CTRL_CONFIG_FIRMWARE_BASE_REQ</code><br><code>GET_CTRL_CONFIG_HARDWARE_BASE_REQ</code><br><code>GET_CTRL_CONFIG_AUTO_NODE_OVERRIDES_REQ</code><br><code>GET_CTRL_CONFIG_NETWORK_OVERRIDES_REQ</code><br><code>GET_CTRL_CONFIG_NODE_OVERRIDES_REQ</code></td></tr><tr><td>Set Config Overrides</td><td><code>SET_CTRL_CONFIG_NETWORK_OVERRIDES_REQ</code><br><code>SET_CTRL_CONFIG_NODE_OVERRIDES_REQ</code><br><code>MODIFY_CTRL_CONFIG_NETWORK_OVERRIDES_REQ</code><br><code>MODIFY_CTRL_CONFIG_NODE_OVERRIDES_REQ</code><br><code>CLEAR_AUTO_NODE_OVERRIDES_CONFIG</code></td></tr><tr><td>Get Config Metadata</td><td><code>GET_CTRL_CONFIG_METADATA_REQ</code></td></tr><tr><td>Get Config Actions</td><td><code>GET_CTRL_CONFIG_NETWORK_OVERRIDES_ACTIONS_REQ</code><br><code>GET_CTRL_CONFIG_NODE_OVERRIDES_ACTIONS_REQ</code><br><code>GET_CTRL_CONFIG_ACTIONS_RESULTS_REQ</code></td></tr><tr><td>Perform Optimizations</td><td><code>TRIGGER_POLARITY_OPTIMIZATION</code><br><code>TRIGGER_GOLAY_OPTIMIZATION</code><br><code>TRIGGER_CONTROL_SUPERFRAME_OPTIMIZATION</code><br><code>TRIGGER_CHANNEL_OPTIMIZATION</code></td></tr></tbody></table><p>All <code>SET</code> operations on the controller are validated using the <em>config
metadata</em>, which is a separate JSON file describing every configuration
parameter. All <code>GET</code> operations are served locally except for getting
post-config actions, which sends out <code>GET_MINION_CONFIG_ACTIONS_REQ</code> messages to
minions to request the actions that they would take for a given configuration
change; responses can then be polled from the controller. Additionally, the
controller handles the <code>EDIT_NODE</code> command from <code>TopologyApp</code> to migrate a
node&#x27;s configuration upon a node name change.</p><p>The controller pushes the full node configuration to a minion&#x27;s <code>ConfigApp</code>
through the <code>SET_MINION_CONFIG_REQ</code> command. The minion updates its copy of
the configuration on disk (<code>/data/cfg/node_config.json</code>) and takes any required
post-config actions. These actions are determined by taking the
<em>JSON difference</em> between the current and new node configurations, then applying
all actions defined in the local metadata file.</p><p>Note that much of the functionality described above is implemented within helper
classes:</p><ul><li><code>ConfigHelper</code> (<em>e2e-controller</em>) manages reading, modifying, and writing to
all separate configuration layers.</li><li><code>NodeConfigWrapper</code> (<em>e2e-common</em>) manages reading and writing the full node
configuration.</li><li><code>ConfigMetadata</code> (<em>e2e-common</em>) manages reading the config metadata file,
validating configuration, and extracting post-config actions.</li><li><code>ConfigUtil</code> (<em>e2e-common</em>) contains miscellaneous static utilities, such as
version string parsing.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="syncing-configuration">Syncing Configuration<a class="hash-link" href="#syncing-configuration" title="Direct link to heading">​</a></h3><p>To keep config in sync, nodes send an MD5 hash of their local configuration to
the controller in their periodic status reports (<code>STATUS_REPORT</code>) from
<code>StatusApp</code>. The controller&#x27;s <code>ConfigApp</code> periodically iterates over all
received status reports and looks for mismatches with its computed
configuration. For each mismatch, the controller will push a new node
configuration to the minion, as described above. There is a fixed interval
between consecutive pushes to the same node, as a protective measure in case the
new configuration causes a fatal error on the node; this delay is reset when the
controller receives a configuration change.</p><p>The automatic config sync can be disabled by &quot;un-managing&quot; the network or
specific nodes via a special boolean configuration field
<code>sysParams.managedConfig</code>. This may be needed temporarily for testing purposes.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="staged-rollout">Staged Rollout<a class="hash-link" href="#staged-rollout" title="Direct link to heading">​</a></h3><p>The controller&#x27;s <code>ConfigApp</code> contains an optional scheduling algorithm, similar
to that of <code>UpgradeApp</code>, to roll out configuration changes that affect multiple
nodes in batches (e.g. when changing network overrides). This protects against
network-wide service disruption and network isolation, but will delay the
propagation of configuration changes.</p><p>To enable this staging algorithm, set the <code>config_staged_rollout_enabled</code> flag
on the controller; by default, all config updates to nodes are sent
simultaneously.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="interoperability">Interoperability<a class="hash-link" href="#interoperability" title="Direct link to heading">​</a></h3><p>When the controller finds a node with an unrecognized hardware board ID and
version, it will disable config updates for that node because unknown
hardware-specific configs may exist.</p><p>Additionally, if the <code>unknown_hw_queries_enabled</code> flag is set (default on), the
controller will send <code>GET_MINION_BASE_CONFIG</code> queries to these nodes
(rate-limited per node and board ID). In response, each minion will return a
<code>MINION_BASE_CONFIG</code> message containing its latest base configuration and
metadata. The controller merges these minion structures into its existing config
data (non-persistently), and can afterwards re-enable config updates for all
nodes with the same hardware board ID. Any conflicting metadata entries are
dropped, and unknown post-config actions are parsed but ignored.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="layered-configuration-model">Layered Configuration Model<a class="hash-link" href="#layered-configuration-model" title="Direct link to heading">​</a></h2><p>Terragraph follows a layered configuration model, with a node&#x27;s &quot;full&quot;
configuration computed as the union of all layers in the following order:</p><ul><li><strong>Base configuration</strong> - The default configuration, which is tied to a
specific software version and is included as part of the image. The controller
finds the closest match for a node&#x27;s software version string, and falls back
to the latest if no match was found.</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/etc/e2e_config/base_versions/&lt;version&gt;.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>Firmware-specific base configuration</strong> - The default configuration tied to a
specific firmware version, which is also included as part of the image. Values
are applied on top of the initial base configuration layer.</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/etc/e2e_config/base_versions/fw_versions/&lt;version&gt;.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>Hardware-specific base configuration</strong> - The default configuration tied to a
specific hardware type, which is also included as part of the image. Each
hardware type supplies configuration that changes with software versions.
Values are applied on top of the firmware base configuration layer. The
mapping between hardware types and hardware board IDs is defined in
<code>/etc/e2e_config/base_versions/hw_versions/hw_types.json</code>.</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/etc/e2e_config/base_versions/hw_versions/&lt;hw_type&gt;/&lt;version&gt;.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>Automated node overrides</strong> - Contains any config parameters for specific
nodes that were automatically set by the E2E controller.</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/data/cfg/auto_node_config_overrides.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>Network overrides</strong> - Contains any config parameters that should be
uniformly overridden across the entire network. This takes precedence over the
base configuration and automatic overrides.</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/data/cfg/network_config_overrides.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>Node overrides</strong> - Contains any config parameters that should be overridden
only on specific nodes (e.g. PoP nodes). This takes precedence over the
network overrides.</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/data/cfg/node_config_overrides.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The E2E controller manages and stores the separate config layers. Terragraph
nodes have no knowledge of these layers, <em>except</em> the base configuration on the
image. The nodes will copy the latest base version (via natural sort order) if
the configuration file on disk is missing or corrupt.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="config-metadata">Config Metadata<a class="hash-link" href="#config-metadata" title="Direct link to heading">​</a></h2><p>A separate config metadata file (<code>/etc/e2e_config/config_metadata.json</code>) is used
for per-config documentation, verification, and actions. Every configuration
field has a corresponding entry in this file.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-types">Data Types<a class="hash-link" href="#data-types" title="Direct link to heading">​</a></h3><p>Whereas node configuration is a JSON-serialized Thrift structure, the metadata
is freeform JSON that is recursively parsed into C++ structures defined in
<code>ConfigMetadata.h</code>.</p><p>Each root metadata entry is parsed into the <code>CfgParamMetadata</code> structure, which
inherits the <code>CfgRecursiveParam</code> base type. A root entry is identified by the
presence of its required properties (&quot;desc&quot;, &quot;type&quot;, &quot;action&quot;). Depending on the
associated configuration field&#x27;s data type, the root structure may or must also
contain a type-specific sub-structure (e.g. required for maps and objects). The
table below shows the association between all possible data types (defined in
the Thrift enum <code>thrift::CfgParamType</code>), the name of their type-specific field,
and the C++ structure for the field:</p><table><thead><tr><th>Type</th><th>Field</th><th>Sub-Structure</th></tr></thead><tbody><tr><td><code>INTEGER</code></td><td><em>intVal</em></td><td><code>CfgIntegerParam</code></td></tr><tr><td><code>FLOAT</code></td><td><em>floatVal</em></td><td><code>CfgFloatParam</code></td></tr><tr><td><code>STRING</code></td><td><em>strVal</em></td><td><code>CfgStringParam</code></td></tr><tr><td><code>BOOLEAN</code></td><td><em>boolVal</em></td><td><code>CfgBooleanParam</code></td></tr><tr><td><code>MAP</code></td><td><em>mapVal</em></td><td><code>CfgMapParam</code></td></tr><tr><td><code>OBJECT</code></td><td><em>objVal</em></td><td><code>CfgObjectParam</code></td></tr></tbody></table><p>Note that these data types constitute all JSON types <em>except arrays</em>. Arrays are
not supported in the configuration model due to ambiguity in layering. Also
note that map keys must be strings, in accordance with JSON specifications.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="post-config-actions">Post-Config Actions<a class="hash-link" href="#post-config-actions" title="Direct link to heading">​</a></h3><p>A post-config action is associated with each metadata entry, determining what
the minion should do when the configuration field is changed. These are defined
in the Thrift enum <code>thrift::CfgAction</code>:</p><table><thead><tr><th>Action</th><th>Description</th></tr></thead><tbody><tr><td><code>NO_ACTION</code></td><td>Do nothing</td></tr><tr><td><code>REBOOT</code></td><td>Reboot the node</td></tr><tr><td><code>RESTART_MINION</code></td><td>Restart e2e_minion</td></tr><tr><td><code>RESTART_STATS_AGENT</code></td><td>Restart stats_agent</td></tr><tr><td><code>RESTART_LOGTAIL</code></td><td>Restart logtail</td></tr><tr><td><code>RESTART_ROUTING</code></td><td>Restart openr and pop_config</td></tr><tr><td><code>RESTART_SQUIRE</code></td><td>Restart squire</td></tr><tr><td><code>REDO_POP_CONFIG</code></td><td>Restart pop_config and fib_nss</td></tr><tr><td><code>RESTART_FLUENTD_AGENT</code></td><td>Restart fluent-bit</td></tr><tr><td><code>RELOAD_DNS_SERVERS</code></td><td>Reload nameservers listed in /etc/resolv.conf</td></tr><tr><td><code>RELOAD_NTP_CONFIG</code></td><td>Restart NTP service with updated config</td></tr><tr><td><code>RELOAD_RSYSLOG_CONFIG</code></td><td>Rewrite rsyslog.conf and restart rsyslogd</td></tr><tr><td><code>RELOAD_SSHD_CA_KEYS</code></td><td>Restart sshd with updated CA keys file</td></tr><tr><td><code>RESTART_KEA</code></td><td>Restart kea (dhcp)</td></tr><tr><td><code>SYNC_LINK_MONITOR</code></td><td>Sync link metrics with openr LinkMonitor</td></tr><tr><td><code>INJECT_KVSTORE_KEYS</code></td><td>Sync keys with openr KvStore</td></tr><tr><td><code>UPDATE_FIREWALL</code></td><td>Rewrite firewall(ip6tables) rules</td></tr><tr><td><code>UPDATE_LINK_METRICS</code></td><td>Update MCS-based link metric config for openr</td></tr><tr><td><code>UPDATE_GLOG_LEVEL</code></td><td>Update glog&#x27;s VLOG level</td></tr><tr><td><code>RELOAD_FIRMWARE</code></td><td>Reload firmware, usually by restarting e2e_minion</td></tr><tr><td><code>SET_FW_PARAMS</code></td><td>Dynamically change this firmware parameter</td></tr><tr><td><code>SET_FW_PARAMS_SYNC_OR_RELOAD_FIRMWARE</code></td><td>Dynamically change this firmware parameter at a specific BWGD index, or reload firmware if not possible</td></tr><tr><td><code>SET_FW_STATS_CONFIG</code></td><td>Set firmware stats config</td></tr><tr><td><code>SET_AIRTIME_PARAMS</code></td><td>Dynamically change link airtime allocation</td></tr><tr><td><code>RESTART_UDP_PING_SERVER</code></td><td>Restart UDP ping server</td></tr><tr><td><code>RELOAD_SSHD</code></td><td>Restart SSH daemon</td></tr><tr><td><code>UPDATE_CHANNEL_ASSIGNMENT</code></td><td>Reassign channels across topology</td></tr><tr><td><code>RESTART_SNMP</code></td><td>Restart NET-SNMP and TG snmp agent daemons</td></tr><tr><td><code>RESTART_WEBUI</code></td><td>Restart WebUI (HTTP server)</td></tr><tr><td><code>RELOAD_TUNNEL_CONFIG</code></td><td>Reload tunnel configuration</td></tr><tr><td><code>RELOAD_VPP_CONFIG_AND_MONITOR</code></td><td>Run vpp_chaperone to re-apply VPP config and restart monitor services</td></tr><tr><td><code>UPDATE_ZONE</code></td><td>Redo POP config if required or do nothing</td></tr><tr><td><code>RELOAD_TOPOLOGY_NAMES</code></td><td>Restart stats_agent and fluent-bit services</td></tr></tbody></table><p>It is possible that multiple actions will be triggered for a single parameter,
e.g. if an object property defines an action different from the root entry. The
object property action does <em>not</em> simply replace the root entry action. Note
that <code>SET_FW_PARAMS</code> and related actions are a special case and will <em>only</em> take
effect when set on an object property (not on a root entry).</p><p>The code handling each action is located in the minion&#x27;s
<code>ConfigApp::performNodeActions()</code> method. The minion is responsible for applying
actions in a sensible order, e.g. rebooting or restarting minion last.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="structure">Structure<a class="hash-link" href="#structure" title="Direct link to heading">​</a></h3><p>Each root metadata entry must include these fields:</p><ul><li><strong>desc:</strong> A string description of the field</li><li><strong>action:</strong> The post-config action (<code>thrift::CfgAction</code>)</li><li><strong>type:</strong> The data type of the field (<code>thrift::CfgParamType</code>)</li></ul><p>Type-specific constraints can be defined using the previously-listed
sub-structures:</p><ul><li><em>intVal</em><ul><li><strong>allowedRanges:</strong> An array of allowed ranges, where each range is a
two-element integer array <!-- -->[min, max]<!-- --> (inclusive)</li><li><strong>allowedValues:</strong> An array of allowed integer values, separate from
allowedRanges (e.g. for special values like -1)</li></ul></li><li><em>floatVal</em><ul><li><strong>allowedRanges:</strong> An array of allowed ranges, where each range is a
two-element floating-point array <!-- -->[min, max]<!-- --> (inclusive)</li><li><strong>allowedValues:</strong> An array of allowed floating-point values, separate
from allowedRanges</li></ul></li><li><em>strVal</em><ul><li><strong>regexMatches:</strong> A regular expression string which the value must match</li><li><strong>intRanges:</strong> An array of allowed integer ranges (like above); the string
value is parsed as an integer</li><li><strong>floatRanges:</strong> An array of allowed floating-point ranges (like above);
the string value is parsed as a floating-point number</li><li><strong>allowedValues:</strong> An array of allowed string values, separate from
regexMatches</li></ul></li><li><em>boolVal</em><ul><li><em>n/a</em></li></ul></li><li><em>objVal</em><ul><li><strong>properties:</strong> A map of string property names to objects with the
following fields:<ul><li><strong>desc:</strong> A string description of the object property</li><li><strong>action:</strong> An <em>additional</em> post-config action (<code>thrift::CfgAction</code>)</li><li><strong>required:</strong> Whether defining this property is required (default
false)</li><li><strong>type:</strong> The data type of the property value (<code>thrift::CfgParamType</code>)</li><li><em>intVal, floatVal, strVal, boolVal, objVal, mapVal</em></li></ul></li></ul></li><li><em>mapVal</em><ul><li><strong>type:</strong> The data type of the map values (enum, see above)</li><li><em>intVal, floatVal, strVal, boolVal, objVal, mapVal</em></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deprecation">Deprecation<a class="hash-link" href="#deprecation" title="Direct link to heading">​</a></h3><p>A configuration field can be marked as &quot;deprecated&quot; by setting the optional
property <code>&quot;deprecated&quot;: true</code> on any root or object-property metadata entry.
Deprecated configuration fields will still be initially read from disk, but only
allow <code>GET</code> operations during runtime.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="read-only">Read-only<a class="hash-link" href="#read-only" title="Direct link to heading">​</a></h3><p>A configuration field can be marked as &quot;read-only&quot; by setting the optional
property <code>&quot;readOnly&quot;: true</code> on any root or object-property metadata entry.
Read-only configuration fields will still be initially read from disk, but only
allow <code>GET</code> operations during runtime.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="preprocessing">Preprocessing<a class="hash-link" href="#preprocessing" title="Direct link to heading">​</a></h3><p>The config metadata parser supports a simple form of macro expansion. Macro
expansion blocks are denoted with a &quot;copy-block&quot; marker (<code>__copy_block__</code>),
which is a normal JSON property that takes as a string value the absolute
location of the target block to copy (with all properties delimited by a
period). The target JSON value will be copied into the source location (i.e.
where copy-block was used). Any other properties defined within the original
object with copy-block will <em>override</em> those same properties in the copied
target block.</p><p>In the example below, the &quot;mcs&quot; block under &quot;radioParamsBase&quot; will be copied
into &quot;linkParamsBase&quot;, but with the action &quot;SET_FW_PARAMS&quot; instead of
&quot;RESTART_MINION&quot;:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;linkParamsBase&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;desc&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Link parameters&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;action&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;NO_ACTION&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;OBJECT&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;objVal&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;properties&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;fwParams&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;desc&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Firmware parameters for links&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;action&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;RESTART_MINION&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;OBJECT&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;objVal&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;properties&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">&quot;mcs&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">&quot;__copy_block__&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;radioParamsBase.objVal.properties.fwParams.objVal.properties.mcs&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">&quot;action&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;SET_FW_PARAMS&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;radioParamsBase&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;desc&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Radio parameters&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;action&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;NO_ACTION&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;OBJECT&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;objVal&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;properties&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;fwParams&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;desc&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Firmware parameters for radios&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;action&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;RESTART_MINION&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;OBJECT&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;objVal&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;properties&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">&quot;mcs&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">&quot;desc&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MCS used by transmitter (1-12: Static MCS, 35: Joint LA-TPC)&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;INTEGER&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">&quot;intVal&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token property" style="color:#36acaa">&quot;allowedRanges&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token property" style="color:#36acaa">&quot;allowedValues&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">35</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The current implementation handles circular- and self-references (throw error),
as well as dependencies (parse with no order requirement).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="e2e-configuration">E2E Configuration<a class="hash-link" href="#e2e-configuration" title="Direct link to heading">​</a></h2><p>The controller and aggregator are configured using separate configuration files
with a similar overall design as the node configuration, and are managed by the
<code>E2EConfigWrapper</code> class. The configuration model does not have any layers (or
&quot;base&quot; configuration), but the user operations on these configurations are
otherwise the same as for nodes.</p><p>These E2E configuration files are shown in the table below.</p><table><thead><tr><th>Thrift Structure</th><th>Configuration File</th><th>Metadata File</th></tr></thead><tbody><tr><td><code>thrift::ControllerConfig</code></td><td><code>/data/cfg/controller_config.json</code></td><td><code>/etc/e2e_config/controller_config_metadata.json</code></td></tr><tr><td><code>thrift::AggregatorConfig</code></td><td><code>/data/cfg/aggregator_config.json</code></td><td><code>/etc/stats_config/aggregator_config_metadata.json</code></td></tr></tbody></table><p>The following actions are supported in the E2E configuration files:</p><table><thead><tr><th>Action</th><th>Description</th></tr></thead><tbody><tr><td><code>NO_ACTION</code></td><td>Do nothing</td></tr><tr><td><code>REBOOT</code></td><td>Send SIGTERM to the process</td></tr><tr><td><code>RESTART_STATS_AGENT</code></td><td>Restart stats_agent</td></tr><tr><td><code>UPDATE_GLOG_LEVEL</code></td><td>Update glog&#x27;s VLOG level</td></tr><tr><td><code>UPDATE_GFLAG</code></td><td>Reload associated gflag value</td></tr><tr><td><code>UPDATE_SCAN_CONFIG</code></td><td>Update scan configuration</td></tr></tbody></table><p>The E2E configuration structures contain a special &quot;flags&quot; map, which defines
command-line flags to be passed into the E2E controller and NMS aggregator on
startup. The systemd service scripts will pass the flags, and utilize the
<code>config_print_flags</code> script which reads a configuration file and returns the
command-line flags as a formatted string.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="config-metadata-1">Config Metadata<a class="hash-link" href="#config-metadata-1" title="Direct link to heading">​</a></h3><p>Certain metadata properties are specific to E2E configuration, and are described
in the sections below.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="tags">Tags<a class="hash-link" href="#tags" title="Direct link to heading">​</a></h4><p>Descriptive tags can be set on any root or object-property metadata entry via
the optional <code>&quot;tag&quot;</code> string property. Tags are purely informational.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="sync">Sync<a class="hash-link" href="#sync" title="Direct link to heading">​</a></h4><p>Controller configuration is partially synced between peers under High
Availability mode (refer to <a href="/docs/developer/High_Availability">High Availability</a> for
further details). Configuration fields must be marked &quot;syncable&quot; by setting the
optional property <code>&quot;sync&quot;: true</code> on any root or object-property metadata entry.
In general, only network-level configuration is synced, and host-level
configuration is not synced.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="software-version-strings">Software Version Strings<a class="hash-link" href="#software-version-strings" title="Direct link to heading">​</a></h2><p>Selection of the correct <em>base configuration</em> and <em>hardware-specific base
configuration</em> is determined by each node&#x27;s software version string, contained
in the file <code>/etc/tgversion</code>.</p><p>Optionally, &quot;major&quot; and &quot;minor&quot; version numbers are extracted from version
strings that contain one of the following substrings:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[...] RELEASE_M&lt;major&gt; [...]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[...] RELEASE_M&lt;major&gt;_&lt;minor&gt; [...]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For example, the string below represents major version 60, minor version 7:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Facebook Terragraph Release RELEASE_M60_7-0-g5bec98eb9 michaelcallahan@devvm1112 2020-12-04T15:49:48</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If major and minor versions are present, they are used to compare different
software versions. Otherwise, string-type comparisons are done on the full
version string. Order is important when determining the latest known
configuration, for example during node startup where the initial node
configuration file is generated if absent (via <code>/usr/sbin/config_read_env</code>).
There is an assumption that the &quot;latest&quot; base configuration file present on a
node&#x27;s filesystem is the one it should use locally.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="adding-new-configuration">Adding New Configuration<a class="hash-link" href="#adding-new-configuration" title="Direct link to heading">​</a></h2><p>The sections below describe the steps required to write new configuration.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-hardware">New Hardware<a class="hash-link" href="#new-hardware" title="Direct link to heading">​</a></h3><p>Hardware-specific configuration is applied based on a <em>hardware board ID</em>,
<em>hardware type</em>, and <em>software version</em>.</p><ul><li>The <em>hardware board ID</em> is defined by the value of <code>HW_BOARD_ID</code> in the node
info file (<code>/var/run/node_info</code>). This file is generated by a startup script
<code>gen_node_info_file.sh</code> which must be modified for new hardware platforms. See
<a href="/docs/developer/Service_Scripts#service-scripts-environment-variables">Service Scripts</a>
for more details.</li><li>The <em>hardware type</em> is defined in <code>hw_types.json</code> (described above),
which is a mapping between board IDs and subdirectory names (within
<code>./base_versions/hw_versions/</code>). One hardware type can represent multiple
board IDs (e.g. for related platforms with identical configuration).</li><li>The <em>software version</em> is used to match both the base configuration and
hardware-specific configuration. If any hardware-specific configuration should
be applied, then a file should exist for each supported software version in
both <code>./base_versions/&lt;version&gt;.json</code> and
<code>./base_versions/hw_versions/&lt;hw_type&gt;/&lt;version&gt;.json</code>.</li></ul><p><em>For interoperability, vendors <strong>must</strong> define a new, unique hardware board ID
for each product.</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-configuration-fields">New Configuration Fields<a class="hash-link" href="#new-configuration-fields" title="Direct link to heading">​</a></h3><p>All configuration fields must have the following parts:</p><ul><li><em>Definition</em> - Within the appropriate Thrift structure (i.e. <code>NodeConfig</code>,
<code>ControllerConfig</code>, or <code>AggregatorConfig</code>), as described above.</li><li><em>Metadata</em> - Within the corresponding metadata file (i.e.
<code>controller_metadata.json</code>, <code>controller_config_metadata.json</code>, or
<code>aggregator_config_metadata.json</code>).</li><li><em>Default value</em> - Within the base configuration JSON file. For
hardware-specific fields, the default value should be placed in the
hardware-specific base configuration file instead; in these cases, an empty
value is usually added to the base configuration as well (for visibility).</li></ul><p><em>For interoperability, vendors should follow these guidelines:</em></p><ul><li>Choose obviously non-conflicting key names for custom fields. For example,
include the company name in every field name (for top-level structures).</li><li>Pick indices for new Thrift fields within unique ranges to avoid serialization
and/or merge conflicts. For example, start at 20000 (random number) instead of
the next consecutive integer.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-command-line-flags">New Command-Line Flags<a class="hash-link" href="#new-command-line-flags" title="Direct link to heading">​</a></h3><p>When adding new command-line flags to the E2E controller or NMS aggregator, it
is recommended (but not required) to add an entry to corresponding metadata
file. This provides better visibility (e.g. in the NMS), enables input
validation, and allows post-config actions to be applied.</p><p>Flags for other services (e.g. E2E minion) are not supported here; consider
using explicit configuration fields instead.</p><a id="configuration-management-breaking-changes"></a><h3 class="anchor anchorWithStickyNavbar_LWe7" id="breaking-changes">Breaking Changes<a class="hash-link" href="#breaking-changes" title="Direct link to heading">​</a></h3><p>For configuration changes which are not backwards compatible (e.g.
moving/renaming fields), it is recommended to support automatic migration
between the old and new configuration versions to avoid the need for user
intervention. This migration procedure is implemented in the script
<code>src/terragraph-e2e/lua/migrate_e2e_data.lua</code>, which should be run automatically
during software upgrades (e.g. when using the NMS installer) and will modify
data files as needed. Follow instructions in this script to add additional
migration functions.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a class="hash-link" href="#resources" title="Direct link to heading">​</a></h2><ul><li><a href="https://github.com/facebook/folly/blob/master/folly/docs/Dynamic.md" target="_blank" rel="noopener noreferrer">folly::dynamic</a> - Meta&#x27;s C++ dynamically-typed value abstraction</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/terragraph/meta-terragraph/edit/main/docs/../docs/developer/Configuration_Management.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_eYIM" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vbeJ"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/developer/Software_Upgrade"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Software Upgrade</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/developer/Scans"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Scans</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#architecture" class="table-of-contents__link toc-highlight">Architecture</a><ul><li><a href="#operations" class="table-of-contents__link toc-highlight">Operations</a></li><li><a href="#syncing-configuration" class="table-of-contents__link toc-highlight">Syncing Configuration</a></li><li><a href="#staged-rollout" class="table-of-contents__link toc-highlight">Staged Rollout</a></li><li><a href="#interoperability" class="table-of-contents__link toc-highlight">Interoperability</a></li></ul></li><li><a href="#layered-configuration-model" class="table-of-contents__link toc-highlight">Layered Configuration Model</a></li><li><a href="#config-metadata" class="table-of-contents__link toc-highlight">Config Metadata</a><ul><li><a href="#data-types" class="table-of-contents__link toc-highlight">Data Types</a></li><li><a href="#post-config-actions" class="table-of-contents__link toc-highlight">Post-Config Actions</a></li><li><a href="#structure" class="table-of-contents__link toc-highlight">Structure</a></li><li><a href="#deprecation" class="table-of-contents__link toc-highlight">Deprecation</a></li><li><a href="#read-only" class="table-of-contents__link toc-highlight">Read-only</a></li><li><a href="#preprocessing" class="table-of-contents__link toc-highlight">Preprocessing</a></li></ul></li><li><a href="#e2e-configuration" class="table-of-contents__link toc-highlight">E2E Configuration</a><ul><li><a href="#config-metadata-1" class="table-of-contents__link toc-highlight">Config Metadata</a></li></ul></li><li><a href="#software-version-strings" class="table-of-contents__link toc-highlight">Software Version Strings</a></li><li><a href="#adding-new-configuration" class="table-of-contents__link toc-highlight">Adding New Configuration</a><ul><li><a href="#new-hardware" class="table-of-contents__link toc-highlight">New Hardware</a></li><li><a href="#new-configuration-fields" class="table-of-contents__link toc-highlight">New Configuration Fields</a></li><li><a href="#new-command-line-flags" class="table-of-contents__link toc-highlight">New Command-Line Flags</a></li><li><a href="#breaking-changes" class="table-of-contents__link toc-highlight">Breaking Changes</a></li></ul></li><li><a href="#resources" class="table-of-contents__link toc-highlight">Resources</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Terragraph</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/runbook/Overview">Overview</a></li><li class="footer__item"><a href="https://www.facebook.com/connectivity" target="_blank" rel="noopener noreferrer" class="footer__link-item">Meta Connectivity<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/terragraph" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/HQaxCevzus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Meta Platforms, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.ee1b3ecd.js"></script>
<script src="/assets/js/main.feb34f19.js"></script>
</body>
</html>