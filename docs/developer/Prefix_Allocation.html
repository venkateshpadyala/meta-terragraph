<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-developer/Prefix_Allocation">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="search" type="application/opensearchdescription+xml" title="Terragraph" href="/opensearch.xml">
<link rel="stylesheet" href="/katex/katex.min.css"><title data-rh="true">Prefix Allocation | Terragraph</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://terragraph.com/logo/terragraph-logo-full-RGB.png"><meta data-rh="true" name="twitter:image" content="https://terragraph.com/logo/terragraph-logo-full-RGB.png"><meta data-rh="true" property="og:url" content="https://terragraph.com/docs/developer/Prefix_Allocation"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Prefix Allocation | Terragraph"><meta data-rh="true" name="description" content="This document describes Terragraph&#x27;s algorithms for allocating prefixes to"><meta data-rh="true" property="og:description" content="This document describes Terragraph&#x27;s algorithms for allocating prefixes to"><link data-rh="true" rel="icon" href="/logo/terragraph-logo-favicon-32x32-full-RGB.png"><link data-rh="true" rel="canonical" href="https://terragraph.com/docs/developer/Prefix_Allocation"><link data-rh="true" rel="alternate" href="https://terragraph.com/docs/developer/Prefix_Allocation" hreflang="en"><link data-rh="true" rel="alternate" href="https://terragraph.com/docs/developer/Prefix_Allocation" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://TB9T0CGM6Y-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.48218837.css">
<link rel="preload" href="/assets/js/runtime~main.ee1b3ecd.js" as="script">
<link rel="preload" href="/assets/js/main.feb34f19.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/logo/terragraph-logo-favicon-32x32-full-RGB.svg" alt="Terragraph Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/logo/terragraph-logo-favicon-32x32-white-RGB.svg" alt="Terragraph Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/terragraph/meta-terragraph" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link githubButton navbarIconButton" title="GitHub"></a><a href="https://discord.gg/HQaxCevzus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link discordButton navbarIconButton" title="Discord"></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/runbook">Runbook</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/developer">Developer Manual</a></li><li><a class="dropdown__link" href="/docs/whitepapers">Whitepapers</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/developer">Developer Manual</a><button aria-label="Toggle the collapsible sidebar category &#x27;Developer Manual&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developer/Overview">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/developer/Communication_Protocol">Architecture</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/developer/Beamforming_Link_Adaptation">Firmware Layer</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/developer/Topology_Management">End-to-End (E2E) Service</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developer/Topology_Management">Topology Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developer/Network_Ignition">Network Ignition</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developer/Software_Upgrade">Software Upgrade</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developer/Configuration_Management">Configuration Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developer/Scans">Scans</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developer/Network_Measurements">Network Measurements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/developer/Prefix_Allocation">Prefix Allocation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developer/Topology_Discovery">Topology Discovery</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/developer/Stats_Events_Logs">Application Layer Modules</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/developer/Service_Scripts">System Management</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/developer/Release_Conventions">Version Control</a></div></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/developer"><span itemprop="name">Developer Manual</span></a><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">End-to-End (E2E) Service</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Prefix Allocation</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Prefix Allocation</h1><p>This document describes Terragraph&#x27;s algorithms for allocating prefixes to
nodes. Network prefix validation and allocation is handled by either
<code>CentralizedPrefixAllocator</code> or <code>DeterministicPrefixAllocator</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="background">Background<a class="hash-link" href="#background" title="Direct link to heading">​</a></h2><p>Terragraph networks are given an IPv6 &quot;seed prefix&quot; (e.g.
<code>face:b00c:cafe:ba00::/56</code>) from which subnet prefixes are allocated to all DNs
and CNs. There are three different methods for allocating node prefixes with
Open/R, described briefly below. For more details, refer to the Open/R
documentation for <a href="https://github.com/facebook/openr/blob/tg/openr/docs/PrefixAllocator.md" target="_blank" rel="noopener noreferrer">openr::PrefixAllocator</a>.</p><ul><li><em>Distributed</em> - Distributed prefix allocation is completely handled within
Open/R. Under this scheme, nodes pick random prefixes from the allowed range
and advertise them to the network. The algorithm attempts to resolve any
collisions, but is not always successful in practice; this can result in
duplicated prefixes or unreachable nodes.</li><li><em>Centralized (default)</em> - Centralized prefix allocation is handled by the E2E
controller. The controller performs all prefix allocations, which prevents
collisions and enables more sophisticated allocation algorithms.</li><li><em>Deterministic</em> - Deterministic prefix allocation is also handled by the E2E
controller. The controller assigns prefixes to nodes based on the network
topology to allow POP nodes to take advantage of route summarization and help
load balance ingress traffic.</li></ul><p>Both centralized and deterministic prefix allocation require initial parameters
to be provided through the <code>thrift::PrefixAllocParams</code> structure in the
controller config file:</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">PrefixAllocParams</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">1</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string seedPrefix</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">2</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> i32 allocPrefixLen</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>seedPrefix</code>, the prefix of the entire Terragraph network, is given in <a href="https://tools.ietf.org/html/rfc4632" target="_blank" rel="noopener noreferrer">CIDR</a>
notation. <code>allocPrefixLen</code> specifies the bit-length of prefixes allocated to
each node. If these parameters are not provided in the controller config, the
controller will automatically revert to distributed prefix allocation.</p><p>Terragraph currently takes the <em>centralized</em> approach.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="centralized-prefix-allocation-cpa">Centralized Prefix Allocation (CPA)<a class="hash-link" href="#centralized-prefix-allocation-cpa" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="allocation">Allocation<a class="hash-link" href="#allocation" title="Direct link to heading">​</a></h3><p>Given a valid <code>thrift::PrefixAllocParams</code> struct, the controller is able to
allocate prefixes for all the nodes in the network automatically. However,
individual prefixes can also be manually defined through the <code>prefix</code> field in
each <code>thrift::Node</code> entry.</p><p>The allocation steps are as follows:</p><ul><li>On controller startup:<ul><li>If the topology file specifies any node prefixes, mark them as taken.</li><li>For all nodes without prefixes, allocate one.</li></ul></li><li>When adding a node:<ul><li>If the prefix is unspecified, allocate one.</li></ul></li></ul><p>Allocation is performed by iterating sequentially through all possible prefixes
and assigning the first unallocated prefix. For example, if allocating <code>/64</code>
prefixes for nodes from the seed prefix <code>face:b00c:cafe:ba00::/56</code>, the
controller would assign prefixes in the following order:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">face:b00c:cafe:ba00::/64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">face:b00c:cafe:ba01::/64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">face:b00c:cafe:baff::/64</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>TopologyApp</code> computes prefixes and periodically sends a <code>SET_PREFIXES</code> command
to any reachable POP node&#x27;s <code>OpenrClientApp</code>. If any prefixes changed, the
minion injects the new prefixes into Open/R using the <code>KvStore</code> key
<code>e2e-network-allocations</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="validation">Validation<a class="hash-link" href="#validation" title="Direct link to heading">​</a></h3><p>Checks:</p><ul><li>All prefixes (seed prefix and node prefixes) must be valid IPv6 prefixes in
CIDR notation.</li><li>Node prefixes must be contained within the subnet of the seed prefix.</li><li>Node prefixes must be of the specified bit-length (<code>allocPrefixLen</code>).</li></ul><p>Constraints:</p><ul><li>Node prefixes must be unique within the network topology.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="deterministic-prefix-allocation-dpa">Deterministic Prefix Allocation (DPA)<a class="hash-link" href="#deterministic-prefix-allocation-dpa" title="Direct link to heading">​</a></h2><p>The CPA allocation is somewhat arbitrary. That is, no subnetting of the seed
prefix occurs and each POP node is only able to advertise the entire seed prefix
to BGP peers, rather than a more specific subnet. This makes it possible for
ingress traffic to enter the network through a suboptimal POP node.</p><p>Deterministic Prefix Allocation (DPA) assigns prefixes to nodes based on a given
topology to allow POP nodes to take advantage of route summarization and help
load balance ingress traffic. DPA attempts to segment a TG network so that each
POP site can advertise its own specific BGP routes. Ingress traffic will then
automatically flow through the optimal POP, instead of tromboning between POPs.</p><p align="center"><img loading="lazy" src="/figures/dpa_prefix_zones.jpg" width="650" class="img_ev3q"></p><p>Terminology:</p><ul><li><strong>Prefix zone</strong> - A group of nodes to their closest POP site (using wireless
hop count as the distance metric).</li><li><strong>Prefix space</strong> - The number of prefixes with length <code>allocPrefixLen</code>
within a prefix. For example, <code>face:b00c:cafe:ba00::/56</code> has a prefix space of
256 (there are 256 unique /64s in a /56). Prefix spaces are always powers of 2
and there is a direct translation from prefix length to prefix space:<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">prefix_space = 2^(allocPrefixLen - prefix_length)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><strong>Zone prefix</strong> - A prefix assigned to a prefix zone. Zone prefixes are used
to allocate node prefixes.</li><li><strong>Node prefix</strong> - A prefix with length <code>allocPrefixLen</code> that can be assigned
to a node.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="segmentation-into-prefix-zones">Segmentation Into Prefix Zones<a class="hash-link" href="#segmentation-into-prefix-zones" title="Direct link to heading">​</a></h3><p>DPA begins by segmenting the network into prefix zones (one per POP site). This
is accomplished by running a BFS algorithm starting from POP sites to find the
closest POP site, in terms of hop count, to each node. Nodes closest to a
specific POP site form a prefix zone.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="allocate-prefix-spaces">Allocate Prefix Spaces<a class="hash-link" href="#allocate-prefix-spaces" title="Direct link to heading">​</a></h3><p>Each prefix zone is allocated a number of prefixes so that the sum of their
prefix spaces is at least as large as the number of nodes in the zone.</p><p>The recursive algorithm in pseudocode (Python) is as follows:</p><div class="language-Python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def allocate_prefix_spaces(zones, network_prefix_space):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    unsatisfied_zones = zones.get_unsatisfied_zones()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    prefix_space_needed = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for zone in zones:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        prefix_space_needed += zone.get_unsatisfied_node_count()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Not enough network prefix space, so no solution.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if network_prefix_space &lt; prefix_space_needed:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         return False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Used up all of the network_prefix_space, if no more prefix space is</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # needed, then a valid solution was found, otherwise no solution.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if network_prefix_space == 0:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return prefix_space_needed == network_prefix_space</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    prefix_space_divisor = next_power_of_2(num_unsatisfied_zones)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    while True:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        remaining = network_prefix_space</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        prefix_space = remaining / prefix_space_divisor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # For each unsatisfied zone, add a prefix_space to it.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for zone in unsatisfied_zones:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            zone.add_prefix_space(prefix_space)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            remaining -= prefix_space</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Recurse with the remaining prefix space, if this results in a valid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # solution, return. Otherwise, double the divisor and repeat.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if allocate_prefix_spaces(zones, remaining):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        prefix_space_divisor *= 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The recursive algorithm is best explained with an example. Assume the following
set up (based off of TowerG data):</p><ul><li>3 prefix zones<ul><li>Prefix zone A with 100 nodes</li><li>Prefix zone B with  68 nodes</li><li>Prefix zone C with  20 nodes</li></ul></li><li>seedPrefix: <code>face:b00c:cafe:ba00::/56</code></li><li>allocPrefixLen: 64</li><li>Network prefix space: 256</li></ul><p>Since the seedPrefix is a <code>/56</code>, the seedPrefix has a prefix space of 256.
In other words, this network can support up to 256 nodes, since each requires a
<code>/64</code>.</p><p>The algorithm first tries to equally divide the network prefix space to each
prefix zone. Since prefix spaces are always powers of 2, divide the the network
prefix space by 4 (since we have 3 prefix zones). This results in 4 prefix
spaces of size 64 which are assigned to the three prefix zones and with a 64
left over.</p><table><thead><tr><th>Prefix zone A (100)</th><th>Prefix zone B (68)</th><th>Prefix zone C (20)</th><th>Remaining</th></tr></thead><tbody><tr><td>64</td><td>64</td><td>64</td><td>64</td></tr></tbody></table><p>Prefix zone C is satisfied since it has only 20 nodes. Since prefix zones A and
C are not yet satisfied, recurse using the remaining prefix space of 64. Split
the the network prefix space (64) equally (divide by 2) and assign the prefix
spaces (32) to each zone:</p><table><thead><tr><th>Prefix zone A (100)</th><th>Prefix zone B (68)</th><th>Prefix zone C (20)</th><th>Remaining</th></tr></thead><tbody><tr><td>64</td><td>64</td><td>64</td><td>64</td></tr><tr><td>32</td><td>32</td><td></td><td>0</td></tr></tbody></table><p>Now, prefix zone B is satisfied, but prefix zone A is not and there is no more
remaining prefix space. The algorithm reaches a dead end, so it backtracks to
the previous state:</p><table><thead><tr><th>Prefix zone A (100)</th><th>Prefix zone B (68)</th><th>Prefix zone C (20)</th><th>Remaining</th></tr></thead><tbody><tr><td>64</td><td>64</td><td>64</td><td>64</td></tr></tbody></table><p>This time, instead of dividing by 2, the divisor is multiplied by 2 and we
divide the remaining (64) by 4. Then, assign a prefix space (16) to each of the
two unsatisfied zones:</p><table><thead><tr><th>Prefix zone A (100)</th><th>Prefix zone B (68)</th><th>Prefix zone C (20)</th><th>Remaining</th></tr></thead><tbody><tr><td>64</td><td>64</td><td>64</td><td>64</td></tr><tr><td>16</td><td>16</td><td></td><td>32</td></tr></tbody></table><p>Now, prefix zone A is the only unsatisfied zone and it can use the rest of the
remaining prefix space.</p><table><thead><tr><th>Prefix zone A (100)</th><th>Prefix zone B (68)</th><th>Prefix zone C (20)</th><th>Remaining</th></tr></thead><tbody><tr><td>64</td><td>64</td><td>64</td><td>64</td></tr><tr><td>16</td><td>16</td><td></td><td>32</td></tr><tr><td>32</td><td></td><td></td><td>0</td></tr></tbody></table><p>All prefix zones are satisfied and the entire network prefix space has
successfully been divvied up.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="prefix-spaces-to-prefix-lengths">Prefix spaces to prefix lengths<a class="hash-link" href="#prefix-spaces-to-prefix-lengths" title="Direct link to heading">​</a></h3><p>Next, the prefix spaces need to be converted to prefix lengths.</p><p>The prefix space to prefix length conversion is trivial:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">prefix_length = allocPrefixLen - log_2 (prefix_space)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>log_2</code> will work nicely since prefix spaces are restricted to powers of 2.
The prefix spaces from the previous example turn into:</p><table><thead><tr><th>Prefix zone A (100)</th><th>Prefix zone B (68)</th><th>Prefix zone C (20)</th></tr></thead><tbody><tr><td>/58</td><td>/58</td><td>/58</td></tr><tr><td>/60</td><td>/60</td><td></td></tr><tr><td>/59</td><td></td><td> </td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="zone-prefixes-from-prefix-lengths">Zone prefixes from prefix lengths<a class="hash-link" href="#zone-prefixes-from-prefix-lengths" title="Direct link to heading">​</a></h3><p>Converting a set of prefix lengths into actual prefixes involves traversing a
binary prefix tree from shortest to longest prefix.</p><p>The prefix tree looks like the following:</p><p align="center"><img loading="lazy" src="/figures/dpa_prefix_tree.svg" width="650" class="img_ev3q"></p><p>Create a mapping from prefix length to prefix zone:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">prefix_length_to_zone = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    58: [A, B, C],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    59: [A],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    60: [A, B]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For each prefix length (from shortest to longest) and for each prefix zone that
requires a prefix of said length, allocate a prefix from the prefix tree.</p><p>The tree allows tracking of previously allocated prefixes. Traverse the tree
from the root, taking the left branch at each node. If an allocated prefix is
encountered, backtrack and take the right branch. Note that this only works when
prefix lengths are considered from shortest to longest.</p><p>The prefix tree concept can be replaced by a recursive function and a set
containing previously allocated prefixes. See
<code>DeterministicPrefixAllocator::allocateZonePrefixesHelper()</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="node-prefixes">Node Prefixes<a class="hash-link" href="#node-prefixes" title="Direct link to heading">​</a></h3><p>After zone prefixes are allocated, node prefixes are allocated by iterating
linearly through all the zone prefixes for that node&#x27;s zone. This is the same as
the currently used centralized prefix algorithm.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="miscellaneous">Miscellaneous<a class="hash-link" href="#miscellaneous" title="Direct link to heading">​</a></h3><p>During the prefix space allocation phase, multiple prefix spaces of the same
size may be allocated to the same prefix zone. These prefix spaces can be merged
into one larger space and is an implementation detail in
<code>PrefixZone::addToPrefixSpace()</code>. This also makes the entire algorithm run
significantly faster.</p><p>Currently, there is no convenient way to redistribute zone prefixes to allow for
additional nodes to be added. To mitigate this, there is
<code>PrefixZone::allocationSizeOverride_</code> which overrides the initial zone size used
for prefix space allocation. This override is configured with the controller
flag <code>dpa_zone_prefix_space_buffer</code>. It defaults to 7, so 7 additional nodes
can be added to a prefix zone before it runs out of prefix space. Additionally,
there is an API endpoint <code>/api/allocatePrefixes</code> (or the ZMQ message type
<code>ALLOCATE_PREFIXES</code>) that will redo the entire algorithm.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="validation-1">Validation<a class="hash-link" href="#validation-1" title="Direct link to heading">​</a></h3><p>Checks:</p><ul><li>All prefixes (seed prefix, zone prefixes and node prefixes) must be valid IPv6
prefixes in CIDR notation.</li><li>Node prefixes must be contained within a subnet of one of their zone&#x27;s
prefixes.</li><li>Node prefixes must be of the specified bit-length (<code>allocPrefixLen</code>).</li><li>Zone prefixes must be in the subnet of the seed prefix.</li></ul><p>Constraints:</p><ul><li>Node prefixes must be unique within the network topology.</li><li>Zone prefixes have enough prefix space to allocate node prefixes for all of
the prefix zone&#x27;s nodes.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="changing-network-prefix">Changing Network Prefix<a class="hash-link" href="#changing-network-prefix" title="Direct link to heading">​</a></h2><p>When using either centralized or deterministic prefix allocation, changing the
network prefix becomes a multi-step process since the controller can lose
reachability to the network when there is a mismatch between the allocated node
prefixes and the network prefix advertised in BGP.</p><p>This can be solved by advertising both the old and new network prefixes in BGP
during the transition. This can be done manually using the
<code>bgpParams.specificNetworkPrefixes</code> node config field on any POP node.</p><p>Additionally, the controller tries to automate some of these steps. The
following are the recommended steps to change the network prefix when either
centralized or deterministic prefix allocation is enabled:</p><ol><li>Change the <code>seedPrefix</code> in <code>controller_config.json</code> to the new prefix.</li><li>Wait until the static node prefixes are updated in KvStore by running
<code>breeze kvstore alloc-list</code> on a node in the network. Alternatively, the new
prefix will be reflected in the nodes&#x27; IP addresses in NMS.</li><li>Change the <code>e2e-network-prefix</code> to the new prefix in <code>kvstoreParams</code> on the
POP nodes.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a class="hash-link" href="#references" title="Direct link to heading">​</a></h2><ul><li><a href="https://github.com/facebook/openr/blob/tg/openr/docs/PrefixAllocator.md" target="_blank" rel="noopener noreferrer">openr::PrefixAllocator</a> - Open/R&#x27;s prefix allocation scheme</li><li><a href="https://tools.ietf.org/html/rfc4632" target="_blank" rel="noopener noreferrer">CIDR</a> - Classless Inter-domain Routing (RFC 4632)</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/terragraph/meta-terragraph/edit/main/docs/../docs/developer/Prefix_Allocation.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_eYIM" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vbeJ"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/developer/Network_Measurements"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Network Measurements</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/developer/Topology_Discovery"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Topology Discovery</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#background" class="table-of-contents__link toc-highlight">Background</a></li><li><a href="#centralized-prefix-allocation-cpa" class="table-of-contents__link toc-highlight">Centralized Prefix Allocation (CPA)</a><ul><li><a href="#allocation" class="table-of-contents__link toc-highlight">Allocation</a></li><li><a href="#validation" class="table-of-contents__link toc-highlight">Validation</a></li></ul></li><li><a href="#deterministic-prefix-allocation-dpa" class="table-of-contents__link toc-highlight">Deterministic Prefix Allocation (DPA)</a><ul><li><a href="#segmentation-into-prefix-zones" class="table-of-contents__link toc-highlight">Segmentation Into Prefix Zones</a></li><li><a href="#allocate-prefix-spaces" class="table-of-contents__link toc-highlight">Allocate Prefix Spaces</a></li><li><a href="#prefix-spaces-to-prefix-lengths" class="table-of-contents__link toc-highlight">Prefix spaces to prefix lengths</a></li><li><a href="#zone-prefixes-from-prefix-lengths" class="table-of-contents__link toc-highlight">Zone prefixes from prefix lengths</a></li><li><a href="#node-prefixes" class="table-of-contents__link toc-highlight">Node Prefixes</a></li><li><a href="#miscellaneous" class="table-of-contents__link toc-highlight">Miscellaneous</a></li><li><a href="#validation-1" class="table-of-contents__link toc-highlight">Validation</a></li></ul></li><li><a href="#changing-network-prefix" class="table-of-contents__link toc-highlight">Changing Network Prefix</a></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Terragraph</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/runbook/Overview">Overview</a></li><li class="footer__item"><a href="https://www.facebook.com/connectivity" target="_blank" rel="noopener noreferrer" class="footer__link-item">Meta Connectivity<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/terragraph" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/HQaxCevzus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Meta Platforms, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.ee1b3ecd.js"></script>
<script src="/assets/js/main.feb34f19.js"></script>
</body>
</html>